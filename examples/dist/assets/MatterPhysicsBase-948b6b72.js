import{g as ve,c as J,M as xe,r as he,B as be,A as we,P as Se,__tla as _e}from"./index-a4804d50.js";let se,Ae=Promise.all([(()=>{try{return _e}catch{}})()]).then(async()=>{var Z={exports:{}};(function(E,V){(function(B,L){E.exports=L()})(J,function(){return function(B){var L={};function y(e){if(L[e])return L[e].exports;var c=L[e]={i:e,l:!1,exports:{}};return B[e].call(c.exports,c,c.exports,y),c.l=!0,c.exports}return y.m=B,y.c=L,y.d=function(e,c,a){y.o(e,c)||Object.defineProperty(e,c,{enumerable:!0,get:a})},y.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},y.t=function(e,c){if(c&1&&(e=y(e)),c&8||c&4&&typeof e=="object"&&e&&e.__esModule)return e;var a=Object.create(null);if(y.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),c&2&&typeof e!="string")for(var r in e)y.d(a,r,function(d){return e[d]}.bind(null,r));return a},y.n=function(e){var c=e&&e.__esModule?function(){return e.default}:function(){return e};return y.d(c,"a",c),c},y.o=function(e,c){return Object.prototype.hasOwnProperty.call(e,c)},y.p="",y(y.s=20)}([function(B,L){var y={};B.exports=y,function(){y._baseDelta=1e3/60,y._nextId=0,y._seed=0,y._nowStartTime=+new Date,y._warnedOnce={},y._decomp=null,y.extend=function(c,a){var r,d;typeof a=="boolean"?(r=2,d=a):(r=1,d=!0);for(var s=r;s<arguments.length;s++){var u=arguments[s];if(u)for(var o in u)d&&u[o]&&u[o].constructor===Object&&(!c[o]||c[o].constructor===Object)?(c[o]=c[o]||{},y.extend(c[o],d,u[o])):c[o]=u[o]}return c},y.clone=function(c,a){return y.extend({},a,c)},y.keys=function(c){if(Object.keys)return Object.keys(c);var a=[];for(var r in c)a.push(r);return a},y.values=function(c){var a=[];if(Object.keys){for(var r=Object.keys(c),d=0;d<r.length;d++)a.push(c[r[d]]);return a}for(var s in c)a.push(c[s]);return a},y.get=function(c,a,r,d){a=a.split(".").slice(r,d);for(var s=0;s<a.length;s+=1)c=c[a[s]];return c},y.set=function(c,a,r,d,s){var u=a.split(".").slice(d,s);return y.get(c,a,0,-1)[u[u.length-1]]=r,r},y.shuffle=function(c){for(var a=c.length-1;a>0;a--){var r=Math.floor(y.random()*(a+1)),d=c[a];c[a]=c[r],c[r]=d}return c},y.choose=function(c){return c[Math.floor(y.random()*c.length)]},y.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},y.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},y.isFunction=function(c){return typeof c=="function"},y.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},y.isString=function(c){return toString.call(c)==="[object String]"},y.clamp=function(c,a,r){return c<a?a:c>r?r:c},y.sign=function(c){return c<0?-1:1},y.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-y._nowStartTime},y.random=function(c,a){return c=typeof c<"u"?c:0,a=typeof a<"u"?a:1,c+e()*(a-c)};var e=function(){return y._seed=(y._seed*9301+49297)%233280,y._seed/233280};y.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},y.logLevel=1,y.log=function(){console&&y.logLevel>0&&y.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},y.info=function(){console&&y.logLevel>0&&y.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},y.warn=function(){console&&y.logLevel>0&&y.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},y.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");y._warnedOnce[c]||(y.warn(c),y._warnedOnce[c]=!0)},y.deprecated=function(c,a,r){c[a]=y.chain(function(){y.warnOnce("\u{1F505} deprecated \u{1F505}",r)},c[a])},y.nextId=function(){return y._nextId++},y.indexOf=function(c,a){if(c.indexOf)return c.indexOf(a);for(var r=0;r<c.length;r++)if(c[r]===a)return r;return-1},y.map=function(c,a){if(c.map)return c.map(a);for(var r=[],d=0;d<c.length;d+=1)r.push(a(c[d]));return r},y.topologicalSort=function(c){var a=[],r=[],d=[];for(var s in c)!r[s]&&!d[s]&&y._topologicalSort(s,r,d,c,a);return a},y._topologicalSort=function(c,a,r,d,s){var u=d[c]||[];r[c]=!0;for(var o=0;o<u.length;o+=1){var t=u[o];r[t]||a[t]||y._topologicalSort(t,a,r,d,s)}r[c]=!1,a[c]=!0,s.push(c)},y.chain=function(){for(var c=[],a=0;a<arguments.length;a+=1){var r=arguments[a];r._chained?c.push.apply(c,r._chained):c.push(r)}var d=function(){for(var s,u=new Array(arguments.length),o=0,t=arguments.length;o<t;o++)u[o]=arguments[o];for(o=0;o<c.length;o+=1){var n=c[o].apply(s,u);typeof n<"u"&&(s=n)}return s};return d._chained=c,d},y.chainPathBefore=function(c,a,r){return y.set(c,a,y.chain(r,y.get(c,a)))},y.chainPathAfter=function(c,a,r){return y.set(c,a,y.chain(y.get(c,a),r))},y.setDecomp=function(c){y._decomp=c},y.getDecomp=function(){var c=y._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof J<"u"&&(c=J.decomp)}catch{c=null}return c}}()},function(B,L){var y={};B.exports=y,function(){y.create=function(e){var c={min:{x:0,y:0},max:{x:0,y:0}};return e&&y.update(c,e),c},y.update=function(e,c,a){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<c.length;r++){var d=c[r];d.x>e.max.x&&(e.max.x=d.x),d.x<e.min.x&&(e.min.x=d.x),d.y>e.max.y&&(e.max.y=d.y),d.y<e.min.y&&(e.min.y=d.y)}a&&(a.x>0?e.max.x+=a.x:e.min.x+=a.x,a.y>0?e.max.y+=a.y:e.min.y+=a.y)},y.contains=function(e,c){return c.x>=e.min.x&&c.x<=e.max.x&&c.y>=e.min.y&&c.y<=e.max.y},y.overlaps=function(e,c){return e.min.x<=c.max.x&&e.max.x>=c.min.x&&e.max.y>=c.min.y&&e.min.y<=c.max.y},y.translate=function(e,c){e.min.x+=c.x,e.max.x+=c.x,e.min.y+=c.y,e.max.y+=c.y},y.shift=function(e,c){var a=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=c.x,e.max.x=c.x+a,e.min.y=c.y,e.max.y=c.y+r}}()},function(B,L){var y={};B.exports=y,function(){y.create=function(e,c){return{x:e||0,y:c||0}},y.clone=function(e){return{x:e.x,y:e.y}},y.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},y.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},y.rotate=function(e,c,a){var r=Math.cos(c),d=Math.sin(c);a||(a={});var s=e.x*r-e.y*d;return a.y=e.x*d+e.y*r,a.x=s,a},y.rotateAbout=function(e,c,a,r){var d=Math.cos(c),s=Math.sin(c);r||(r={});var u=a.x+((e.x-a.x)*d-(e.y-a.y)*s);return r.y=a.y+((e.x-a.x)*s+(e.y-a.y)*d),r.x=u,r},y.normalise=function(e){var c=y.magnitude(e);return c===0?{x:0,y:0}:{x:e.x/c,y:e.y/c}},y.dot=function(e,c){return e.x*c.x+e.y*c.y},y.cross=function(e,c){return e.x*c.y-e.y*c.x},y.cross3=function(e,c,a){return(c.x-e.x)*(a.y-e.y)-(c.y-e.y)*(a.x-e.x)},y.add=function(e,c,a){return a||(a={}),a.x=e.x+c.x,a.y=e.y+c.y,a},y.sub=function(e,c,a){return a||(a={}),a.x=e.x-c.x,a.y=e.y-c.y,a},y.mult=function(e,c){return{x:e.x*c,y:e.y*c}},y.div=function(e,c){return{x:e.x/c,y:e.y/c}},y.perp=function(e,c){return c=c===!0?-1:1,{x:c*-e.y,y:c*e.x}},y.neg=function(e){return{x:-e.x,y:-e.y}},y.angle=function(e,c){return Math.atan2(c.y-e.y,c.x-e.x)},y._temp=[y.create(),y.create(),y.create(),y.create(),y.create(),y.create()]}()},function(B,L,y){var e={};B.exports=e;var c=y(2),a=y(0);(function(){e.create=function(r,d){for(var s=[],u=0;u<r.length;u++){var o=r[u],t={x:o.x,y:o.y,index:u,body:d,isInternal:!1};s.push(t)}return s},e.fromPath=function(r,d){var s=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return r.replace(s,function(o,t,n){u.push({x:parseFloat(t),y:parseFloat(n)})}),e.create(u,d)},e.centre=function(r){for(var d=e.area(r,!0),s={x:0,y:0},u,o,t,n=0;n<r.length;n++)t=(n+1)%r.length,u=c.cross(r[n],r[t]),o=c.mult(c.add(r[n],r[t]),u),s=c.add(s,o);return c.div(s,6*d)},e.mean=function(r){for(var d={x:0,y:0},s=0;s<r.length;s++)d.x+=r[s].x,d.y+=r[s].y;return c.div(d,r.length)},e.area=function(r,d){for(var s=0,u=r.length-1,o=0;o<r.length;o++)s+=(r[u].x-r[o].x)*(r[u].y+r[o].y),u=o;return d?s/2:Math.abs(s)/2},e.inertia=function(r,d){for(var s=0,u=0,o=r,t,n,i=0;i<o.length;i++)n=(i+1)%o.length,t=Math.abs(c.cross(o[n],o[i])),s+=t*(c.dot(o[n],o[n])+c.dot(o[n],o[i])+c.dot(o[i],o[i])),u+=t;return d/6*(s/u)},e.translate=function(r,d,s){s=typeof s<"u"?s:1;var u=r.length,o=d.x*s,t=d.y*s,n;for(n=0;n<u;n++)r[n].x+=o,r[n].y+=t;return r},e.rotate=function(r,d,s){if(d!==0){var u=Math.cos(d),o=Math.sin(d),t=s.x,n=s.y,i=r.length,l,f,h,w;for(w=0;w<i;w++)l=r[w],f=l.x-t,h=l.y-n,l.x=t+(f*u-h*o),l.y=n+(f*o+h*u);return r}},e.contains=function(r,d){for(var s=d.x,u=d.y,o=r.length,t=r[o-1],n,i=0;i<o;i++){if(n=r[i],(s-t.x)*(n.y-t.y)+(u-t.y)*(t.x-n.x)>0)return!1;t=n}return!0},e.scale=function(r,d,s,u){if(d===1&&s===1)return r;u=u||e.centre(r);for(var o,t,n=0;n<r.length;n++)o=r[n],t=c.sub(o,u),r[n].x=u.x+t.x*d,r[n].y=u.y+t.y*s;return r},e.chamfer=function(r,d,s,u,o){typeof d=="number"?d=[d]:d=d||[8],s=typeof s<"u"?s:-1,u=u||2,o=o||14;for(var t=[],n=0;n<r.length;n++){var i=r[n-1>=0?n-1:r.length-1],l=r[n],f=r[(n+1)%r.length],h=d[n<d.length?n:d.length-1];if(h===0){t.push(l);continue}var w=c.normalise({x:l.y-i.y,y:i.x-l.x}),S=c.normalise({x:f.y-l.y,y:l.x-f.x}),p=Math.sqrt(2*Math.pow(h,2)),g=c.mult(a.clone(w),h),v=c.normalise(c.mult(c.add(w,S),.5)),m=c.sub(l,c.mult(v,p)),b=s;s===-1&&(b=Math.pow(h,.32)*1.75),b=a.clamp(b,u,o),b%2===1&&(b+=1);for(var x=Math.acos(c.dot(w,S)),A=x/b,_=0;_<b;_++)t.push(c.add(c.rotate(g,A*_),m))}return t},e.clockwiseSort=function(r){var d=e.mean(r);return r.sort(function(s,u){return c.angle(d,s)-c.angle(d,u)}),r},e.isConvex=function(r){var d=0,s=r.length,u,o,t,n;if(s<3)return null;for(u=0;u<s;u++)if(o=(u+1)%s,t=(u+2)%s,n=(r[o].x-r[u].x)*(r[t].y-r[o].y),n-=(r[o].y-r[u].y)*(r[t].x-r[o].x),n<0?d|=1:n>0&&(d|=2),d===3)return!1;return d!==0?!0:null},e.hull=function(r){var d=[],s=[],u,o;for(r=r.slice(0),r.sort(function(t,n){var i=t.x-n.x;return i!==0?i:t.y-n.y}),o=0;o<r.length;o+=1){for(u=r[o];s.length>=2&&c.cross3(s[s.length-2],s[s.length-1],u)<=0;)s.pop();s.push(u)}for(o=r.length-1;o>=0;o-=1){for(u=r[o];d.length>=2&&c.cross3(d[d.length-2],d[d.length-1],u)<=0;)d.pop();d.push(u)}return d.pop(),s.pop(),d.concat(s)}})()},function(B,L,y){var e={};B.exports=e;var c=y(3),a=y(2),r=y(7),d=y(0),s=y(1),u=y(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var n={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},i=d.extend(n,t);return o(i,t),i},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var o=function(t,n){n=n||{},e.set(t,{bounds:t.bounds||s.create(t.vertices),positionPrev:t.positionPrev||a.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),c.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),s.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:n.axes||t.axes,area:n.area||t.area,mass:n.mass||t.mass,inertia:n.inertia||t.inertia});var i=t.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),l=t.isStatic?"#555":"#ccc",f=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||i,t.render.strokeStyle=t.render.strokeStyle||l,t.render.lineWidth=t.render.lineWidth||f,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,n,i){var l;typeof n=="string"&&(l=n,n={},n[l]=i);for(l in n)if(Object.prototype.hasOwnProperty.call(n,l))switch(i=n[l],l){case"isStatic":e.setStatic(t,i);break;case"isSleeping":r.set(t,i);break;case"mass":e.setMass(t,i);break;case"density":e.setDensity(t,i);break;case"inertia":e.setInertia(t,i);break;case"vertices":e.setVertices(t,i);break;case"position":e.setPosition(t,i);break;case"angle":e.setAngle(t,i);break;case"velocity":e.setVelocity(t,i);break;case"angularVelocity":e.setAngularVelocity(t,i);break;case"speed":e.setSpeed(t,i);break;case"angularSpeed":e.setAngularSpeed(t,i);break;case"parts":e.setParts(t,i);break;case"centre":e.setCentre(t,i);break;default:t[l]=i}},e.setStatic=function(t,n){for(var i=0;i<t.parts.length;i++){var l=t.parts[i];l.isStatic=n,n?(l._original={restitution:l.restitution,friction:l.friction,mass:l.mass,inertia:l.inertia,density:l.density,inverseMass:l.inverseMass,inverseInertia:l.inverseInertia},l.restitution=0,l.friction=1,l.mass=l.inertia=l.density=1/0,l.inverseMass=l.inverseInertia=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.angularVelocity=0,l.speed=0,l.angularSpeed=0,l.motion=0):l._original&&(l.restitution=l._original.restitution,l.friction=l._original.friction,l.mass=l._original.mass,l.inertia=l._original.inertia,l.density=l._original.density,l.inverseMass=l._original.inverseMass,l.inverseInertia=l._original.inverseInertia,l._original=null)}},e.setMass=function(t,n){var i=t.inertia/(t.mass/6);t.inertia=i*(n/6),t.inverseInertia=1/t.inertia,t.mass=n,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,n){e.setMass(t,n*t.area),t.density=n},e.setInertia=function(t,n){t.inertia=n,t.inverseInertia=1/t.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=c.create(n,t),t.axes=u.fromVertices(t.vertices),t.area=c.area(t.vertices),e.setMass(t,t.density*t.area);var i=c.centre(t.vertices);c.translate(t.vertices,i,-1),e.setInertia(t,e._inertiaScale*c.inertia(t.vertices,t.mass)),c.translate(t.vertices,t.position),s.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,i){var l;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,l=0;l<n.length;l++){var f=n[l];f!==t&&(f.parent=t,t.parts.push(f))}if(t.parts.length!==1){if(i=typeof i<"u"?i:!0,i){var h=[];for(l=0;l<n.length;l++)h=h.concat(n[l].vertices);c.clockwiseSort(h);var w=c.hull(h),S=c.centre(w);e.setVertices(t,w),c.translate(t.vertices,S)}var p=e._totalProperties(t);t.area=p.area,t.parent=t,t.position.x=p.centre.x,t.position.y=p.centre.y,t.positionPrev.x=p.centre.x,t.positionPrev.y=p.centre.y,e.setMass(t,p.mass),e.setInertia(t,p.inertia),e.setPosition(t,p.centre)}},e.setCentre=function(t,n,i){i?(t.positionPrev.x+=n.x,t.positionPrev.y+=n.y,t.position.x+=n.x,t.position.y+=n.y):(t.positionPrev.x=n.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=n.y-(t.position.y-t.positionPrev.y),t.position.x=n.x,t.position.y=n.y)},e.setPosition=function(t,n,i){var l=a.sub(n,t.position);i?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=l.x,t.velocity.y=l.y,t.speed=a.magnitude(l)):(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y);for(var f=0;f<t.parts.length;f++){var h=t.parts[f];h.position.x+=l.x,h.position.y+=l.y,c.translate(h.vertices,l),s.update(h.bounds,h.vertices,t.velocity)}},e.setAngle=function(t,n,i){var l=n-t.angle;i?(t.anglePrev=t.angle,t.angularVelocity=l,t.angularSpeed=Math.abs(l)):t.anglePrev+=l;for(var f=0;f<t.parts.length;f++){var h=t.parts[f];h.angle+=l,c.rotate(h.vertices,l,t.position),u.rotate(h.axes,l),s.update(h.bounds,h.vertices,t.velocity),f>0&&a.rotateAbout(h.position,l,t.position,h.position)}},e.setVelocity=function(t,n){var i=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-n.x*i,t.positionPrev.y=t.position.y-n.y*i,t.velocity.x=(t.position.x-t.positionPrev.x)/i,t.velocity.y=(t.position.y-t.positionPrev.y)/i,t.speed=a.magnitude(t.velocity)},e.getVelocity=function(t){var n=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*n,y:(t.position.y-t.positionPrev.y)*n}},e.getSpeed=function(t){return a.magnitude(e.getVelocity(t))},e.setSpeed=function(t,n){e.setVelocity(t,a.mult(a.normalise(e.getVelocity(t)),n))},e.setAngularVelocity=function(t,n){var i=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-n*i,t.angularVelocity=(t.angle-t.anglePrev)/i,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,n){e.setAngularVelocity(t,d.sign(e.getAngularVelocity(t))*n)},e.translate=function(t,n,i){e.setPosition(t,a.add(t.position,n),i)},e.rotate=function(t,n,i,l){if(!i)e.setAngle(t,t.angle+n,l);else{var f=Math.cos(n),h=Math.sin(n),w=t.position.x-i.x,S=t.position.y-i.y;e.setPosition(t,{x:i.x+(w*f-S*h),y:i.y+(w*h+S*f)},l),e.setAngle(t,t.angle+n,l)}},e.scale=function(t,n,i,l){var f=0,h=0;l=l||t.position;for(var w=0;w<t.parts.length;w++){var S=t.parts[w];c.scale(S.vertices,n,i,l),S.axes=u.fromVertices(S.vertices),S.area=c.area(S.vertices),e.setMass(S,t.density*S.area),c.translate(S.vertices,{x:-S.position.x,y:-S.position.y}),e.setInertia(S,e._inertiaScale*c.inertia(S.vertices,S.mass)),c.translate(S.vertices,{x:S.position.x,y:S.position.y}),w>0&&(f+=S.area,h+=S.inertia),S.position.x=l.x+(S.position.x-l.x)*n,S.position.y=l.y+(S.position.y-l.y)*i,s.update(S.bounds,S.vertices,t.velocity)}t.parts.length>1&&(t.area=f,t.isStatic||(e.setMass(t,t.density*f),e.setInertia(t,h))),t.circleRadius&&(n===i?t.circleRadius*=n:t.circleRadius=null)},e.update=function(t,n){n=(typeof n<"u"?n:1e3/60)*t.timeScale;var i=n*n,l=e._timeCorrection?n/(t.deltaTime||n):1,f=1-t.frictionAir*(n/d._baseDelta),h=(t.position.x-t.positionPrev.x)*l,w=(t.position.y-t.positionPrev.y)*l;t.velocity.x=h*f+t.force.x/t.mass*i,t.velocity.y=w*f+t.force.y/t.mass*i,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=n,t.angularVelocity=(t.angle-t.anglePrev)*f*l+t.torque/t.inertia*i,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var S=0;S<t.parts.length;S++){var p=t.parts[S];c.translate(p.vertices,t.velocity),S>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),t.angularVelocity!==0&&(c.rotate(p.vertices,t.angularVelocity,t.position),u.rotate(p.axes,t.angularVelocity),S>0&&a.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),s.update(p.bounds,p.vertices,t.velocity)}},e.updateVelocities=function(t){var n=e._baseDelta/t.deltaTime,i=t.velocity;i.x=(t.position.x-t.positionPrev.x)*n,i.y=(t.position.y-t.positionPrev.y)*n,t.speed=Math.sqrt(i.x*i.x+i.y*i.y),t.angularVelocity=(t.angle-t.anglePrev)*n,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,n,i){var l={x:n.x-t.position.x,y:n.y-t.position.y};t.force.x+=i.x,t.force.y+=i.y,t.torque+=l.x*i.y-l.y*i.x},e._totalProperties=function(t){for(var n={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=t.parts.length===1?0:1;i<t.parts.length;i++){var l=t.parts[i],f=l.mass!==1/0?l.mass:1;n.mass+=f,n.area+=l.area,n.inertia+=l.inertia,n.centre=a.add(n.centre,a.mult(l.position,f))}return n.centre=a.div(n.centre,n.mass),n}})()},function(B,L,y){var e={};B.exports=e;var c=y(0);(function(){e.on=function(a,r,d){for(var s=r.split(" "),u,o=0;o<s.length;o++)u=s[o],a.events=a.events||{},a.events[u]=a.events[u]||[],a.events[u].push(d);return d},e.off=function(a,r,d){if(!r){a.events={};return}typeof r=="function"&&(d=r,r=c.keys(a.events).join(" "));for(var s=r.split(" "),u=0;u<s.length;u++){var o=a.events[s[u]],t=[];if(d&&o)for(var n=0;n<o.length;n++)o[n]!==d&&t.push(o[n]);a.events[s[u]]=t}},e.trigger=function(a,r,d){var s,u,o,t,n=a.events;if(n&&c.keys(n).length>0){d||(d={}),s=r.split(" ");for(var i=0;i<s.length;i++)if(u=s[i],o=n[u],o){t=c.clone(d,!1),t.name=u,t.source=a;for(var l=0;l<o.length;l++)o[l].apply(a,[t])}}}})()},function(B,L,y){var e={};B.exports=e;var c=y(5),a=y(0),r=y(1),d=y(4);(function(){e.create=function(s){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},s)},e.setModified=function(s,u,o,t){if(s.isModified=u,u&&s.cache&&(s.cache.allBodies=null,s.cache.allConstraints=null,s.cache.allComposites=null),o&&s.parent&&e.setModified(s.parent,u,o,t),t)for(var n=0;n<s.composites.length;n++){var i=s.composites[n];e.setModified(i,u,o,t)}},e.add=function(s,u){var o=[].concat(u);c.trigger(s,"beforeAdd",{object:u});for(var t=0;t<o.length;t++){var n=o[t];switch(n.type){case"body":if(n.parent!==n){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(s,n);break;case"constraint":e.addConstraint(s,n);break;case"composite":e.addComposite(s,n);break;case"mouseConstraint":e.addConstraint(s,n.constraint);break}}return c.trigger(s,"afterAdd",{object:u}),s},e.remove=function(s,u,o){var t=[].concat(u);c.trigger(s,"beforeRemove",{object:u});for(var n=0;n<t.length;n++){var i=t[n];switch(i.type){case"body":e.removeBody(s,i,o);break;case"constraint":e.removeConstraint(s,i,o);break;case"composite":e.removeComposite(s,i,o);break;case"mouseConstraint":e.removeConstraint(s,i.constraint);break}}return c.trigger(s,"afterRemove",{object:u}),s},e.addComposite=function(s,u){return s.composites.push(u),u.parent=s,e.setModified(s,!0,!0,!1),s},e.removeComposite=function(s,u,o){var t=a.indexOf(s.composites,u);if(t!==-1&&e.removeCompositeAt(s,t),o)for(var n=0;n<s.composites.length;n++)e.removeComposite(s.composites[n],u,!0);return s},e.removeCompositeAt=function(s,u){return s.composites.splice(u,1),e.setModified(s,!0,!0,!1),s},e.addBody=function(s,u){return s.bodies.push(u),e.setModified(s,!0,!0,!1),s},e.removeBody=function(s,u,o){var t=a.indexOf(s.bodies,u);if(t!==-1&&e.removeBodyAt(s,t),o)for(var n=0;n<s.composites.length;n++)e.removeBody(s.composites[n],u,!0);return s},e.removeBodyAt=function(s,u){return s.bodies.splice(u,1),e.setModified(s,!0,!0,!1),s},e.addConstraint=function(s,u){return s.constraints.push(u),e.setModified(s,!0,!0,!1),s},e.removeConstraint=function(s,u,o){var t=a.indexOf(s.constraints,u);if(t!==-1&&e.removeConstraintAt(s,t),o)for(var n=0;n<s.composites.length;n++)e.removeConstraint(s.composites[n],u,!0);return s},e.removeConstraintAt=function(s,u){return s.constraints.splice(u,1),e.setModified(s,!0,!0,!1),s},e.clear=function(s,u,o){if(o)for(var t=0;t<s.composites.length;t++)e.clear(s.composites[t],u,!0);return u?s.bodies=s.bodies.filter(function(n){return n.isStatic}):s.bodies.length=0,s.constraints.length=0,s.composites.length=0,e.setModified(s,!0,!0,!1),s},e.allBodies=function(s){if(s.cache&&s.cache.allBodies)return s.cache.allBodies;for(var u=[].concat(s.bodies),o=0;o<s.composites.length;o++)u=u.concat(e.allBodies(s.composites[o]));return s.cache&&(s.cache.allBodies=u),u},e.allConstraints=function(s){if(s.cache&&s.cache.allConstraints)return s.cache.allConstraints;for(var u=[].concat(s.constraints),o=0;o<s.composites.length;o++)u=u.concat(e.allConstraints(s.composites[o]));return s.cache&&(s.cache.allConstraints=u),u},e.allComposites=function(s){if(s.cache&&s.cache.allComposites)return s.cache.allComposites;for(var u=[].concat(s.composites),o=0;o<s.composites.length;o++)u=u.concat(e.allComposites(s.composites[o]));return s.cache&&(s.cache.allComposites=u),u},e.get=function(s,u,o){var t,n;switch(o){case"body":t=e.allBodies(s);break;case"constraint":t=e.allConstraints(s);break;case"composite":t=e.allComposites(s).concat(s);break}return t?(n=t.filter(function(i){return i.id.toString()===u.toString()}),n.length===0?null:n[0]):null},e.move=function(s,u,o){return e.remove(s,u),e.add(o,u),s},e.rebase=function(s){for(var u=e.allBodies(s).concat(e.allConstraints(s)).concat(e.allComposites(s)),o=0;o<u.length;o++)u[o].id=a.nextId();return s},e.translate=function(s,u,o){for(var t=o?e.allBodies(s):s.bodies,n=0;n<t.length;n++)d.translate(t[n],u);return s},e.rotate=function(s,u,o,t){for(var n=Math.cos(u),i=Math.sin(u),l=t?e.allBodies(s):s.bodies,f=0;f<l.length;f++){var h=l[f],w=h.position.x-o.x,S=h.position.y-o.y;d.setPosition(h,{x:o.x+(w*n-S*i),y:o.y+(w*i+S*n)}),d.rotate(h,u)}return s},e.scale=function(s,u,o,t,n){for(var i=n?e.allBodies(s):s.bodies,l=0;l<i.length;l++){var f=i[l],h=f.position.x-t.x,w=f.position.y-t.y;d.setPosition(f,{x:t.x+h*u,y:t.y+w*o}),d.scale(f,u,o)}return s},e.bounds=function(s){for(var u=e.allBodies(s),o=[],t=0;t<u.length;t+=1){var n=u[t];o.push(n.bounds.min,n.bounds.max)}return r.create(o)}})()},function(B,L,y){var e={};B.exports=e;var c=y(4),a=y(5),r=y(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(d,s){for(var u=s/r._baseDelta,o=e._motionSleepThreshold,t=0;t<d.length;t++){var n=d[t],i=c.getSpeed(n),l=c.getAngularSpeed(n),f=i*i+l*l;if(n.force.x!==0||n.force.y!==0){e.set(n,!1);continue}var h=Math.min(n.motion,f),w=Math.max(n.motion,f);n.motion=e._minBias*h+(1-e._minBias)*w,n.sleepThreshold>0&&n.motion<o?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold/u&&e.set(n,!0)):n.sleepCounter>0&&(n.sleepCounter-=1)}},e.afterCollisions=function(d){for(var s=e._motionSleepThreshold,u=0;u<d.length;u++){var o=d[u];if(o.isActive){var t=o.collision,n=t.bodyA.parent,i=t.bodyB.parent;if(!(n.isSleeping&&i.isSleeping||n.isStatic||i.isStatic)&&(n.isSleeping||i.isSleeping)){var l=n.isSleeping&&!n.isStatic?n:i,f=l===n?i:n;!l.isStatic&&f.motion>s&&e.set(l,!1)}}}},e.set=function(d,s){var u=d.isSleeping;s?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,u||a.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,u&&a.trigger(d,"sleepEnd"))}})()},function(B,L,y){var e={};B.exports=e;var c=y(3),a=y(9);(function(){var r=[],d={overlap:0,axis:null},s={overlap:0,axis:null};e.create=function(u,o){return{pair:null,collided:!1,bodyA:u,bodyB:o,parentA:u.parent,parentB:o.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,o,t){if(e._overlapAxes(d,u.vertices,o.vertices,u.axes),d.overlap<=0||(e._overlapAxes(s,o.vertices,u.vertices,o.axes),s.overlap<=0))return null;var n=t&&t.table[a.id(u,o)],i;n?i=n.collision:(i=e.create(u,o),i.collided=!0,i.bodyA=u.id<o.id?u:o,i.bodyB=u.id<o.id?o:u,i.parentA=i.bodyA.parent,i.parentB=i.bodyB.parent),u=i.bodyA,o=i.bodyB;var l;d.overlap<s.overlap?l=d:l=s;var f=i.normal,h=i.supports,w=l.axis,S=w.x,p=w.y;S*(o.position.x-u.position.x)+p*(o.position.y-u.position.y)<0?(f.x=S,f.y=p):(f.x=-S,f.y=-p),i.tangent.x=-f.y,i.tangent.y=f.x,i.depth=l.overlap,i.penetration.x=f.x*i.depth,i.penetration.y=f.y*i.depth;var g=e._findSupports(u,o,f,1),v=0;if(c.contains(u.vertices,g[0])&&(h[v++]=g[0]),c.contains(u.vertices,g[1])&&(h[v++]=g[1]),v<2){var m=e._findSupports(o,u,f,-1);c.contains(o.vertices,m[0])&&(h[v++]=m[0]),v<2&&c.contains(o.vertices,m[1])&&(h[v++]=m[1])}return v===0&&(h[v++]=g[0]),h.length=v,i},e._overlapAxes=function(u,o,t,n){var i=o.length,l=t.length,f=o[0].x,h=o[0].y,w=t[0].x,S=t[0].y,p=n.length,g=Number.MAX_VALUE,v=0,m,b,x,A,_,P;for(_=0;_<p;_++){var k=n[_],C=k.x,T=k.y,M=f*C+h*T,I=w*C+S*T,D=M,O=I;for(P=1;P<i;P+=1)A=o[P].x*C+o[P].y*T,A>D?D=A:A<M&&(M=A);for(P=1;P<l;P+=1)A=t[P].x*C+t[P].y*T,A>O?O=A:A<I&&(I=A);if(b=D-I,x=O-M,m=b<x?b:x,m<g&&(g=m,v=_,m<=0))break}u.axis=n[v],u.overlap=g},e._projectToAxis=function(u,o,t){for(var n=o[0].x*t.x+o[0].y*t.y,i=n,l=1;l<o.length;l+=1){var f=o[l].x*t.x+o[l].y*t.y;f>i?i=f:f<n&&(n=f)}u.min=n,u.max=i},e._findSupports=function(u,o,t,n){var i=o.vertices,l=i.length,f=u.position.x,h=u.position.y,w=t.x*n,S=t.y*n,p=Number.MAX_VALUE,g,v,m,b,x;for(x=0;x<l;x+=1)v=i[x],b=w*(f-v.x)+S*(h-v.y),b<p&&(p=b,g=v);return m=i[(l+g.index-1)%l],p=w*(f-m.x)+S*(h-m.y),v=i[(g.index+1)%l],w*(f-v.x)+S*(h-v.y)<p?(r[0]=g,r[1]=v,r):(r[0]=g,r[1]=m,r)}})()},function(B,L,y){var e={};B.exports=e;var c=y(16);(function(){e.create=function(a,r){var d=a.bodyA,s=a.bodyB,u={id:e.id(d,s),bodyA:d,bodyB:s,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:d.isSensor||s.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,a,r),u},e.update=function(a,r,d){var s=a.contacts,u=r.supports,o=a.activeContacts,t=r.parentA,n=r.parentB,i=t.vertices.length;a.isActive=!0,a.timeUpdated=d,a.collision=r,a.separation=r.depth,a.inverseMass=t.inverseMass+n.inverseMass,a.friction=t.friction<n.friction?t.friction:n.friction,a.frictionStatic=t.frictionStatic>n.frictionStatic?t.frictionStatic:n.frictionStatic,a.restitution=t.restitution>n.restitution?t.restitution:n.restitution,a.slop=t.slop>n.slop?t.slop:n.slop,r.pair=a,o.length=0;for(var l=0;l<u.length;l++){var f=u[l],h=f.body===t?f.index:i+f.index,w=s[h];w?o.push(w):o.push(s[h]=c.create(f))}},e.setActive=function(a,r,d){r?(a.isActive=!0,a.timeUpdated=d):(a.isActive=!1,a.activeContacts.length=0)},e.id=function(a,r){return a.id<r.id?"A"+a.id+"B"+r.id:"A"+r.id+"B"+a.id}})()},function(B,L,y){var e={};B.exports=e;var c=y(3),a=y(2),r=y(7),d=y(1),s=y(11),u=y(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(o){var t=o;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?a.add(t.bodyA.position,t.pointA):t.pointA,i=t.bodyB?a.add(t.bodyB.position,t.pointB):t.pointB,l=a.magnitude(a.sub(n,i));t.length=typeof t.length<"u"?t.length:l,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var f={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(f.type="pin",f.anchors=!1):t.stiffness<.9&&(f.type="spring"),t.render=u.extend(f,t.render),t},e.preSolveAll=function(o){for(var t=0;t<o.length;t+=1){var n=o[t],i=n.constraintImpulse;n.isStatic||i.x===0&&i.y===0&&i.angle===0||(n.position.x+=i.x,n.position.y+=i.y,n.angle+=i.angle)}},e.solveAll=function(o,t){for(var n=u.clamp(t/u._baseDelta,0,1),i=0;i<o.length;i+=1){var l=o[i],f=!l.bodyA||l.bodyA&&l.bodyA.isStatic,h=!l.bodyB||l.bodyB&&l.bodyB.isStatic;(f||h)&&e.solve(o[i],n)}for(i=0;i<o.length;i+=1)l=o[i],f=!l.bodyA||l.bodyA&&l.bodyA.isStatic,h=!l.bodyB||l.bodyB&&l.bodyB.isStatic,!f&&!h&&e.solve(o[i],n)},e.solve=function(o,t){var n=o.bodyA,i=o.bodyB,l=o.pointA,f=o.pointB;if(!(!n&&!i)){n&&!n.isStatic&&(a.rotate(l,n.angle-o.angleA,l),o.angleA=n.angle),i&&!i.isStatic&&(a.rotate(f,i.angle-o.angleB,f),o.angleB=i.angle);var h=l,w=f;if(n&&(h=a.add(n.position,l)),i&&(w=a.add(i.position,f)),!(!h||!w)){var S=a.sub(h,w),p=a.magnitude(S);p<e._minLength&&(p=e._minLength);var g=(p-o.length)/p,v=o.stiffness>=1||o.length===0,m=v?o.stiffness*t:o.stiffness*t*t,b=o.damping*t,x=a.mult(S,g*m),A=(n?n.inverseMass:0)+(i?i.inverseMass:0),_=(n?n.inverseInertia:0)+(i?i.inverseInertia:0),P=A+_,k,C,T,M,I;if(b>0){var D=a.create();T=a.div(S,p),I=a.sub(i&&a.sub(i.position,i.positionPrev)||D,n&&a.sub(n.position,n.positionPrev)||D),M=a.dot(T,I)}n&&!n.isStatic&&(C=n.inverseMass/A,n.constraintImpulse.x-=x.x*C,n.constraintImpulse.y-=x.y*C,n.position.x-=x.x*C,n.position.y-=x.y*C,b>0&&(n.positionPrev.x-=b*T.x*M*C,n.positionPrev.y-=b*T.y*M*C),k=a.cross(l,x)/P*e._torqueDampen*n.inverseInertia*(1-o.angularStiffness),n.constraintImpulse.angle-=k,n.angle-=k),i&&!i.isStatic&&(C=i.inverseMass/A,i.constraintImpulse.x+=x.x*C,i.constraintImpulse.y+=x.y*C,i.position.x+=x.x*C,i.position.y+=x.y*C,b>0&&(i.positionPrev.x+=b*T.x*M*C,i.positionPrev.y+=b*T.y*M*C),k=a.cross(f,x)/P*e._torqueDampen*i.inverseInertia*(1-o.angularStiffness),i.constraintImpulse.angle+=k,i.angle+=k)}}},e.postSolveAll=function(o){for(var t=0;t<o.length;t++){var n=o[t],i=n.constraintImpulse;if(!(n.isStatic||i.x===0&&i.y===0&&i.angle===0)){r.set(n,!1);for(var l=0;l<n.parts.length;l++){var f=n.parts[l];c.translate(f.vertices,i),l>0&&(f.position.x+=i.x,f.position.y+=i.y),i.angle!==0&&(c.rotate(f.vertices,i.angle,n.position),s.rotate(f.axes,i.angle),l>0&&a.rotateAbout(f.position,i.angle,n.position,f.position)),d.update(f.bounds,f.vertices,n.velocity)}i.angle*=e._warming,i.x*=e._warming,i.y*=e._warming}}},e.pointAWorld=function(o){return{x:(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),y:(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0)}},e.pointBWorld=function(o){return{x:(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),y:(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0)}}})()},function(B,L,y){var e={};B.exports=e;var c=y(2),a=y(0);(function(){e.fromVertices=function(r){for(var d={},s=0;s<r.length;s++){var u=(s+1)%r.length,o=c.normalise({x:r[u].y-r[s].y,y:r[s].x-r[u].x}),t=o.y===0?1/0:o.x/o.y;t=t.toFixed(3).toString(),d[t]=o}return a.values(d)},e.rotate=function(r,d){if(d!==0)for(var s=Math.cos(d),u=Math.sin(d),o=0;o<r.length;o++){var t=r[o],n;n=t.x*s-t.y*u,t.y=t.x*u+t.y*s,t.x=n}}})()},function(B,L,y){var e={};B.exports=e;var c=y(3),a=y(0),r=y(4),d=y(1),s=y(2);(function(){e.rectangle=function(u,o,t,n,i){i=i||{};var l={label:"Rectangle Body",position:{x:u,y:o},vertices:c.fromPath("L 0 0 L "+t+" 0 L "+t+" "+n+" L 0 "+n)};if(i.chamfer){var f=i.chamfer;l.vertices=c.chamfer(l.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete i.chamfer}return r.create(a.extend({},l,i))},e.trapezoid=function(u,o,t,n,i,l){l=l||{},i*=.5;var f=(1-i*2)*t,h=t*i,w=h+f,S=w+h,p;i<.5?p="L 0 0 L "+h+" "+-n+" L "+w+" "+-n+" L "+S+" 0":p="L 0 0 L "+w+" "+-n+" L "+S+" 0";var g={label:"Trapezoid Body",position:{x:u,y:o},vertices:c.fromPath(p)};if(l.chamfer){var v=l.chamfer;g.vertices=c.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete l.chamfer}return r.create(a.extend({},g,l))},e.circle=function(u,o,t,n,i){n=n||{};var l={label:"Circle Body",circleRadius:t};i=i||25;var f=Math.ceil(Math.max(10,Math.min(i,t)));return f%2===1&&(f+=1),e.polygon(u,o,f,t,a.extend({},l,n))},e.polygon=function(u,o,t,n,i){if(i=i||{},t<3)return e.circle(u,o,n,i);for(var l=2*Math.PI/t,f="",h=l*.5,w=0;w<t;w+=1){var S=h+w*l,p=Math.cos(S)*n,g=Math.sin(S)*n;f+="L "+p.toFixed(3)+" "+g.toFixed(3)+" "}var v={label:"Polygon Body",position:{x:u,y:o},vertices:c.fromPath(f)};if(i.chamfer){var m=i.chamfer;v.vertices=c.chamfer(v.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete i.chamfer}return r.create(a.extend({},v,i))},e.fromVertices=function(u,o,t,n,i,l,f,h){var w=a.getDecomp(),S,p,g,v,m,b,x,A,_,P,k;for(S=!!(w&&w.quickDecomp),n=n||{},g=[],i=typeof i<"u"?i:!1,l=typeof l<"u"?l:.01,f=typeof f<"u"?f:10,h=typeof h<"u"?h:.01,a.isArray(t[0])||(t=[t]),P=0;P<t.length;P+=1)if(b=t[P],v=c.isConvex(b),m=!v,m&&!S&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),v||!S)v?b=c.clockwiseSort(b):b=c.hull(b),g.push({position:{x:u,y:o},vertices:b});else{var C=b.map(function(W){return[W.x,W.y]});w.makeCCW(C),l!==!1&&w.removeCollinearPoints(C,l),h!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(C,h);var T=w.quickDecomp(C);for(x=0;x<T.length;x++){var M=T[x],I=M.map(function(W){return{x:W[0],y:W[1]}});f>0&&c.area(I)<f||g.push({position:c.centre(I),vertices:I})}}for(x=0;x<g.length;x++)g[x]=r.create(a.extend(g[x],n));if(i){var D=5;for(x=0;x<g.length;x++){var O=g[x];for(A=x+1;A<g.length;A++){var H=g[A];if(d.overlaps(O.bounds,H.bounds)){var R=O.vertices,q=H.vertices;for(_=0;_<O.vertices.length;_++)for(k=0;k<H.vertices.length;k++){var F=s.magnitudeSquared(s.sub(R[(_+1)%R.length],q[k])),G=s.magnitudeSquared(s.sub(R[_],q[(k+1)%q.length]));F<D&&G<D&&(R[_].isInternal=!0,q[k].isInternal=!0)}}}}}return g.length>1?(p=r.create(a.extend({parts:g.slice(0)},n)),r.setPosition(p,{x:u,y:o}),p):g[0]}})()},function(B,L,y){var e={};B.exports=e;var c=y(0),a=y(8);(function(){e.create=function(r){var d={bodies:[],pairs:null};return c.extend(d,r)},e.setBodies=function(r,d){r.bodies=d.slice(0)},e.clear=function(r){r.bodies=[]},e.collisions=function(r){var d=[],s=r.pairs,u=r.bodies,o=u.length,t=e.canCollide,n=a.collides,i,l;for(u.sort(e._compareBoundsX),i=0;i<o;i++){var f=u[i],h=f.bounds,w=f.bounds.max.x,S=f.bounds.max.y,p=f.bounds.min.y,g=f.isStatic||f.isSleeping,v=f.parts.length,m=v===1;for(l=i+1;l<o;l++){var b=u[l],x=b.bounds;if(x.min.x>w)break;if(!(S<x.min.y||p>x.max.y)&&!(g&&(b.isStatic||b.isSleeping))&&t(f.collisionFilter,b.collisionFilter)){var A=b.parts.length;if(m&&A===1){var _=n(f,b,s);_&&d.push(_)}else for(var P=v>1?1:0,k=A>1?1:0,C=P;C<v;C++)for(var T=f.parts[C],h=T.bounds,M=k;M<A;M++){var I=b.parts[M],x=I.bounds;if(!(h.min.x>x.max.x||h.max.x<x.min.x||h.max.y<x.min.y||h.min.y>x.max.y)){var _=n(T,I,s);_&&d.push(_)}}}}}return d},e.canCollide=function(r,d){return r.group===d.group&&r.group!==0?r.group>0:(r.mask&d.category)!==0&&(d.mask&r.category)!==0},e._compareBoundsX=function(r,d){return r.bounds.min.x-d.bounds.min.x}})()},function(B,L,y){var e={};B.exports=e;var c=y(0);(function(){e.create=function(a){var r={};return a||c.log("Mouse.create: element was undefined, defaulting to document.body","warn"),r.element=a||document.body,r.absolute={x:0,y:0},r.position={x:0,y:0},r.mousedownPosition={x:0,y:0},r.mouseupPosition={x:0,y:0},r.offset={x:0,y:0},r.scale={x:1,y:1},r.wheelDelta=0,r.button=-1,r.pixelRatio=parseInt(r.element.getAttribute("data-pixel-ratio"),10)||1,r.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},r.mousemove=function(d){var s=e._getRelativeMousePosition(d,r.element,r.pixelRatio),u=d.changedTouches;u&&(r.button=0,d.preventDefault()),r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.sourceEvents.mousemove=d},r.mousedown=function(d){var s=e._getRelativeMousePosition(d,r.element,r.pixelRatio),u=d.changedTouches;u?(r.button=0,d.preventDefault()):r.button=d.button,r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mousedownPosition.x=r.position.x,r.mousedownPosition.y=r.position.y,r.sourceEvents.mousedown=d},r.mouseup=function(d){var s=e._getRelativeMousePosition(d,r.element,r.pixelRatio),u=d.changedTouches;u&&d.preventDefault(),r.button=-1,r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mouseupPosition.x=r.position.x,r.mouseupPosition.y=r.position.y,r.sourceEvents.mouseup=d},r.mousewheel=function(d){r.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault()},e.setElement(r,r.element),r},e.setElement=function(a,r){a.element=r,r.addEventListener("mousemove",a.mousemove),r.addEventListener("mousedown",a.mousedown),r.addEventListener("mouseup",a.mouseup),r.addEventListener("mousewheel",a.mousewheel),r.addEventListener("DOMMouseScroll",a.mousewheel),r.addEventListener("touchmove",a.mousemove),r.addEventListener("touchstart",a.mousedown),r.addEventListener("touchend",a.mouseup)},e.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},e.setOffset=function(a,r){a.offset.x=r.x,a.offset.y=r.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e.setScale=function(a,r){a.scale.x=r.x,a.scale.y=r.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e._getRelativeMousePosition=function(a,r,d){var s=r.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,o=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,n=a.changedTouches,i,l;return n?(i=n[0].pageX-s.left-o,l=n[0].pageY-s.top-t):(i=a.pageX-s.left-o,l=a.pageY-s.top-t),{x:i/(r.clientWidth/(r.width||r.clientWidth)*d),y:l/(r.clientHeight/(r.height||r.clientHeight)*d)}}})()},function(B,L,y){var e={};B.exports=e;var c=y(0);(function(){e._registry={},e.register=function(a){if(e.isPlugin(a)||c.warn("Plugin.register:",e.toString(a),"does not implement all required fields."),a.name in e._registry){var r=e._registry[a.name],d=e.versionParse(a.version).number,s=e.versionParse(r.version).number;d>s?(c.warn("Plugin.register:",e.toString(r),"was upgraded to",e.toString(a)),e._registry[a.name]=a):d<s?c.warn("Plugin.register:",e.toString(r),"can not be downgraded to",e.toString(a)):a!==r&&c.warn("Plugin.register:",e.toString(a),"is already registered to different plugin object")}else e._registry[a.name]=a;return a},e.resolve=function(a){return e._registry[e.dependencyParse(a).name]},e.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},e.isPlugin=function(a){return a&&a.name&&a.version&&a.install},e.isUsed=function(a,r){return a.used.indexOf(r)>-1},e.isFor=function(a,r){var d=a.for&&e.dependencyParse(a.for);return!a.for||r.name===d.name&&e.versionSatisfies(r.version,d.range)},e.use=function(a,r){if(a.uses=(a.uses||[]).concat(r||[]),a.uses.length===0){c.warn("Plugin.use:",e.toString(a),"does not specify any dependencies to install.");return}for(var d=e.dependencies(a),s=c.topologicalSort(d),u=[],o=0;o<s.length;o+=1)if(s[o]!==a.name){var t=e.resolve(s[o]);if(!t){u.push("\u274C "+s[o]);continue}e.isUsed(a,t.name)||(e.isFor(t,a)||(c.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(a)+"."),t._warned=!0),t.install?t.install(a):(c.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("\u{1F536} "+e.toString(t)),delete t._warned):u.push("\u2705 "+e.toString(t)),a.used.push(t.name))}u.length>0&&c.info(u.join("  "))},e.dependencies=function(a,r){var d=e.dependencyParse(a),s=d.name;if(r=r||{},!(s in r)){a=e.resolve(a)||a,r[s]=c.map(a.uses||[],function(o){e.isPlugin(o)&&e.register(o);var t=e.dependencyParse(o),n=e.resolve(o);return n&&!e.versionSatisfies(n.version,t.range)?(c.warn("Plugin.dependencies:",e.toString(n),"does not satisfy",e.toString(t),"used by",e.toString(d)+"."),n._warned=!0,a._warned=!0):n||(c.warn("Plugin.dependencies:",e.toString(o),"used by",e.toString(d),"could not be resolved."),a._warned=!0),t.name});for(var u=0;u<r[s].length;u+=1)e.dependencies(r[s][u],r);return r}},e.dependencyParse=function(a){if(c.isString(a)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(a)||c.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},e.versionParse=function(a){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(a)||c.warn("Plugin.versionParse:",a,"is not a valid version or range.");var d=r.exec(a),s=Number(d[4]),u=Number(d[5]),o=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:a,operator:d[1]||d[2]||"",major:s,minor:u,patch:o,parts:[s,u,o],prerelease:d[7],number:s*1e8+u*1e4+o}},e.versionSatisfies=function(a,r){r=r||"*";var d=e.versionParse(r),s=e.versionParse(a);if(d.isRange){if(d.operator==="*"||a==="*")return!0;if(d.operator===">")return s.number>d.number;if(d.operator===">=")return s.number>=d.number;if(d.operator==="~")return s.major===d.major&&s.minor===d.minor&&s.patch>=d.patch;if(d.operator==="^")return d.major>0?s.major===d.major&&s.number>=d.number:d.minor>0?s.minor===d.minor&&s.patch>=d.patch:s.patch===d.patch}return a===r||a==="*"}})()},function(B,L){var y={};B.exports=y,function(){y.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(B,L,y){var e={};B.exports=e;var c=y(7),a=y(18),r=y(13),d=y(19),s=y(5),u=y(6),o=y(10),t=y(0),n=y(4);(function(){e.create=function(i){i=i||{};var l={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},f=t.extend(l,i);return f.world=i.world||u.create({label:"World"}),f.pairs=i.pairs||d.create(),f.detector=i.detector||r.create(),f.grid={buckets:[]},f.world.gravity=f.gravity,f.broadphase=f.grid,f.metrics={},f},e.update=function(i,l){var f=t.now(),h=i.world,w=i.detector,S=i.pairs,p=i.timing,g=p.timestamp,v;l=typeof l<"u"?l:t._baseDelta,l*=p.timeScale,p.timestamp+=l,p.lastDelta=l;var m={timestamp:p.timestamp,delta:l};s.trigger(i,"beforeUpdate",m);var b=u.allBodies(h),x=u.allConstraints(h);for(h.isModified&&(r.setBodies(w,b),u.setModified(h,!1,!1,!0)),i.enableSleeping&&c.update(b,l),e._bodiesApplyGravity(b,i.gravity),l>0&&e._bodiesUpdate(b,l),o.preSolveAll(b),v=0;v<i.constraintIterations;v++)o.solveAll(x,l);o.postSolveAll(b),w.pairs=i.pairs;var A=r.collisions(w);d.update(S,A,g),i.enableSleeping&&c.afterCollisions(S.list),S.collisionStart.length>0&&s.trigger(i,"collisionStart",{pairs:S.collisionStart});var _=t.clamp(20/i.positionIterations,0,1);for(a.preSolvePosition(S.list),v=0;v<i.positionIterations;v++)a.solvePosition(S.list,l,_);for(a.postSolvePosition(b),o.preSolveAll(b),v=0;v<i.constraintIterations;v++)o.solveAll(x,l);for(o.postSolveAll(b),a.preSolveVelocity(S.list),v=0;v<i.velocityIterations;v++)a.solveVelocity(S.list,l);return e._bodiesUpdateVelocities(b),S.collisionActive.length>0&&s.trigger(i,"collisionActive",{pairs:S.collisionActive}),S.collisionEnd.length>0&&s.trigger(i,"collisionEnd",{pairs:S.collisionEnd}),e._bodiesClearForces(b),s.trigger(i,"afterUpdate",m),i.timing.lastElapsed=t.now()-f,i},e.merge=function(i,l){if(t.extend(i,l),l.world){i.world=l.world,e.clear(i);for(var f=u.allBodies(i.world),h=0;h<f.length;h++){var w=f[h];c.set(w,!1),w.id=t.nextId()}}},e.clear=function(i){d.clear(i.pairs),r.clear(i.detector)},e._bodiesClearForces=function(i){for(var l=i.length,f=0;f<l;f++){var h=i[f];h.force.x=0,h.force.y=0,h.torque=0}},e._bodiesApplyGravity=function(i,l){var f=typeof l.scale<"u"?l.scale:.001,h=i.length;if(!(l.x===0&&l.y===0||f===0))for(var w=0;w<h;w++){var S=i[w];S.isStatic||S.isSleeping||(S.force.y+=S.mass*l.y*f,S.force.x+=S.mass*l.x*f)}},e._bodiesUpdate=function(i,l){for(var f=i.length,h=0;h<f;h++){var w=i[h];w.isStatic||w.isSleeping||n.update(w,l)}},e._bodiesUpdateVelocities=function(i){for(var l=i.length,f=0;f<l;f++)n.updateVelocities(i[f])}})()},function(B,L,y){var e={};B.exports=e;var c=y(3),a=y(0),r=y(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(d){var s,u,o,t=d.length;for(s=0;s<t;s++)u=d[s],u.isActive&&(o=u.activeContacts.length,u.collision.parentA.totalContacts+=o,u.collision.parentB.totalContacts+=o)},e.solvePosition=function(d,s,u){var o,t,n,i,l,f,h,w,S=e._positionDampen*(u||1),p=a.clamp(s/a._baseDelta,0,1),g=d.length;for(o=0;o<g;o++)t=d[o],!(!t.isActive||t.isSensor)&&(n=t.collision,i=n.parentA,l=n.parentB,f=n.normal,t.separation=f.x*(l.positionImpulse.x+n.penetration.x-i.positionImpulse.x)+f.y*(l.positionImpulse.y+n.penetration.y-i.positionImpulse.y));for(o=0;o<g;o++)t=d[o],!(!t.isActive||t.isSensor)&&(n=t.collision,i=n.parentA,l=n.parentB,f=n.normal,w=t.separation-t.slop*p,(i.isStatic||l.isStatic)&&(w*=2),i.isStatic||i.isSleeping||(h=S/i.totalContacts,i.positionImpulse.x+=f.x*w*h,i.positionImpulse.y+=f.y*w*h),l.isStatic||l.isSleeping||(h=S/l.totalContacts,l.positionImpulse.x-=f.x*w*h,l.positionImpulse.y-=f.y*w*h))},e.postSolvePosition=function(d){for(var s=e._positionWarming,u=d.length,o=c.translate,t=r.update,n=0;n<u;n++){var i=d[n],l=i.positionImpulse,f=l.x,h=l.y,w=i.velocity;if(i.totalContacts=0,f!==0||h!==0){for(var S=0;S<i.parts.length;S++){var p=i.parts[S];o(p.vertices,l),t(p.bounds,p.vertices,w),p.position.x+=f,p.position.y+=h}i.positionPrev.x+=f,i.positionPrev.y+=h,f*w.x+h*w.y<0?(l.x=0,l.y=0):(l.x*=s,l.y*=s)}}},e.preSolveVelocity=function(d){var s=d.length,u,o;for(u=0;u<s;u++){var t=d[u];if(!(!t.isActive||t.isSensor)){var n=t.activeContacts,i=n.length,l=t.collision,f=l.parentA,h=l.parentB,w=l.normal,S=l.tangent;for(o=0;o<i;o++){var p=n[o],g=p.vertex,v=p.normalImpulse,m=p.tangentImpulse;if(v!==0||m!==0){var b=w.x*v+S.x*m,x=w.y*v+S.y*m;f.isStatic||f.isSleeping||(f.positionPrev.x+=b*f.inverseMass,f.positionPrev.y+=x*f.inverseMass,f.anglePrev+=f.inverseInertia*((g.x-f.position.x)*x-(g.y-f.position.y)*b)),h.isStatic||h.isSleeping||(h.positionPrev.x-=b*h.inverseMass,h.positionPrev.y-=x*h.inverseMass,h.anglePrev-=h.inverseInertia*((g.x-h.position.x)*x-(g.y-h.position.y)*b))}}}}},e.solveVelocity=function(d,s){var u=s/a._baseDelta,o=u*u,t=o*u,n=-e._restingThresh*u,i=e._restingThreshTangent,l=e._frictionNormalMultiplier*u,f=e._frictionMaxStatic,h=d.length,w,S,p,g;for(p=0;p<h;p++){var v=d[p];if(!(!v.isActive||v.isSensor)){var m=v.collision,b=m.parentA,x=m.parentB,A=b.velocity,_=x.velocity,P=m.normal.x,k=m.normal.y,C=m.tangent.x,T=m.tangent.y,M=v.activeContacts,I=M.length,D=1/I,O=b.inverseMass+x.inverseMass,H=v.friction*v.frictionStatic*l;for(A.x=b.position.x-b.positionPrev.x,A.y=b.position.y-b.positionPrev.y,_.x=x.position.x-x.positionPrev.x,_.y=x.position.y-x.positionPrev.y,b.angularVelocity=b.angle-b.anglePrev,x.angularVelocity=x.angle-x.anglePrev,g=0;g<I;g++){var R=M[g],q=R.vertex,F=q.x-b.position.x,G=q.y-b.position.y,W=q.x-x.position.x,U=q.y-x.position.y,j=A.x-G*b.angularVelocity,pe=A.y+F*b.angularVelocity,ye=_.x-U*x.angularVelocity,fe=_.y+W*x.angularVelocity,ee=j-ye,te=pe-fe,Y=P*ee+k*te,N=C*ee+T*te,ne=v.separation+Y,K=Math.min(ne,1);K=ne<0?0:K;var ie=K*H;N<-ie||N>ie?(S=N>0?N:-N,w=v.friction*(N>0?1:-1)*t,w<-S?w=-S:w>S&&(w=S)):(w=N,S=f);var oe=F*k-G*P,re=W*k-U*P,ae=D/(O+b.inverseInertia*oe*oe+x.inverseInertia*re*re),X=(1+v.restitution)*Y*ae;if(w*=ae,Y<n)R.normalImpulse=0;else{var me=R.normalImpulse;R.normalImpulse+=X,R.normalImpulse>0&&(R.normalImpulse=0),X=R.normalImpulse-me}if(N<-i||N>i)R.tangentImpulse=0;else{var ge=R.tangentImpulse;R.tangentImpulse+=w,R.tangentImpulse<-S&&(R.tangentImpulse=-S),R.tangentImpulse>S&&(R.tangentImpulse=S),w=R.tangentImpulse-ge}var Q=P*X+C*w,$=k*X+T*w;b.isStatic||b.isSleeping||(b.positionPrev.x+=Q*b.inverseMass,b.positionPrev.y+=$*b.inverseMass,b.anglePrev+=(F*$-G*Q)*b.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=Q*x.inverseMass,x.positionPrev.y-=$*x.inverseMass,x.anglePrev-=(W*$-U*Q)*x.inverseInertia)}}}}})()},function(B,L,y){var e={};B.exports=e;var c=y(9),a=y(0);(function(){e.create=function(r){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},e.update=function(r,d,s){var u=r.list,o=u.length,t=r.table,n=d.length,i=r.collisionStart,l=r.collisionEnd,f=r.collisionActive,h,w,S,p;for(i.length=0,l.length=0,f.length=0,p=0;p<o;p++)u[p].confirmedActive=!1;for(p=0;p<n;p++)h=d[p],S=h.pair,S?(S.isActive?f.push(S):i.push(S),c.update(S,h,s),S.confirmedActive=!0):(S=c.create(h,s),t[S.id]=S,i.push(S),u.push(S));var g=[];for(o=u.length,p=0;p<o;p++)S=u[p],S.confirmedActive||(c.setActive(S,!1,s),l.push(S),!S.collision.bodyA.isSleeping&&!S.collision.bodyB.isSleeping&&g.push(p));for(p=0;p<g.length;p++)w=g[p]-p,S=u[w],u.splice(w,1),delete t[S.id]},e.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},function(B,L,y){var e=B.exports=y(21);e.Axes=y(11),e.Bodies=y(12),e.Body=y(4),e.Bounds=y(1),e.Collision=y(8),e.Common=y(0),e.Composite=y(6),e.Composites=y(22),e.Constraint=y(10),e.Contact=y(16),e.Detector=y(13),e.Engine=y(17),e.Events=y(5),e.Grid=y(23),e.Mouse=y(14),e.MouseConstraint=y(24),e.Pair=y(9),e.Pairs=y(19),e.Plugin=y(15),e.Query=y(25),e.Render=y(26),e.Resolver=y(18),e.Runner=y(27),e.SAT=y(28),e.Sleeping=y(7),e.Svg=y(29),e.Vector=y(2),e.Vertices=y(3),e.World=y(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(B,L,y){var e={};B.exports=e;var c=y(15),a=y(0);(function(){e.name="matter-js",e.version="0.19.0",e.uses=[],e.used=[],e.use=function(){c.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,d){return r=r.replace(/^Matter./,""),a.chainPathBefore(e,r,d)},e.after=function(r,d){return r=r.replace(/^Matter./,""),a.chainPathAfter(e,r,d)}})()},function(B,L,y){var e={};B.exports=e;var c=y(6),a=y(10),r=y(0),d=y(4),s=y(12),u=r.deprecated;(function(){e.stack=function(o,t,n,i,l,f,h){for(var w=c.create({label:"Stack"}),S=o,p=t,g,v=0,m=0;m<i;m++){for(var b=0,x=0;x<n;x++){var A=h(S,p,x,m,g,v);if(A){var _=A.bounds.max.y-A.bounds.min.y,P=A.bounds.max.x-A.bounds.min.x;_>b&&(b=_),d.translate(A,{x:P*.5,y:_*.5}),S=A.bounds.max.x+l,c.addBody(w,A),g=A,v+=1}else S+=l}p+=b+f,S=o}return w},e.chain=function(o,t,n,i,l,f){for(var h=o.bodies,w=1;w<h.length;w++){var S=h[w-1],p=h[w],g=S.bounds.max.y-S.bounds.min.y,v=S.bounds.max.x-S.bounds.min.x,m=p.bounds.max.y-p.bounds.min.y,b=p.bounds.max.x-p.bounds.min.x,x={bodyA:S,pointA:{x:v*t,y:g*n},bodyB:p,pointB:{x:b*i,y:m*l}},A=r.extend(x,f);c.addConstraint(o,a.create(A))}return o.label+=" Chain",o},e.mesh=function(o,t,n,i,l){var f=o.bodies,h,w,S,p,g;for(h=0;h<n;h++){for(w=1;w<t;w++)S=f[w-1+h*t],p=f[w+h*t],c.addConstraint(o,a.create(r.extend({bodyA:S,bodyB:p},l)));if(h>0)for(w=0;w<t;w++)S=f[w+(h-1)*t],p=f[w+h*t],c.addConstraint(o,a.create(r.extend({bodyA:S,bodyB:p},l))),i&&w>0&&(g=f[w-1+(h-1)*t],c.addConstraint(o,a.create(r.extend({bodyA:g,bodyB:p},l)))),i&&w<t-1&&(g=f[w+1+(h-1)*t],c.addConstraint(o,a.create(r.extend({bodyA:g,bodyB:p},l))))}return o.label+=" Mesh",o},e.pyramid=function(o,t,n,i,l,f,h){return e.stack(o,t,n,i,l,f,function(w,S,p,g,v,m){var b=Math.min(i,Math.ceil(n/2)),x=v?v.bounds.max.x-v.bounds.min.x:0;if(!(g>b)){g=b-g;var A=g,_=n-1-g;if(!(p<A||p>_)){m===1&&d.translate(v,{x:(p+(n%2===1?1:-1))*x,y:0});var P=v?p*x:0;return h(o+P+p*l,S,p,g,v,m)}}})},e.newtonsCradle=function(o,t,n,i,l){for(var f=c.create({label:"Newtons Cradle"}),h=0;h<n;h++){var w=1.9,S=s.circle(o+h*(i*w),t+l,i,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),p=a.create({pointA:{x:o+h*(i*w),y:t},bodyB:S});c.addBody(f,S),c.addConstraint(f,p)}return f},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(o,t,n,i,l){var f=d.nextGroup(!0),h=20,w=-n*.5+h,S=n*.5-h,p=0,g=c.create({label:"Car"}),v=s.rectangle(o,t,n,i,{collisionFilter:{group:f},chamfer:{radius:i*.5},density:2e-4}),m=s.circle(o+w,t+p,l,{collisionFilter:{group:f},friction:.8}),b=s.circle(o+S,t+p,l,{collisionFilter:{group:f},friction:.8}),x=a.create({bodyB:v,pointB:{x:w,y:p},bodyA:m,stiffness:1,length:0}),A=a.create({bodyB:v,pointB:{x:S,y:p},bodyA:b,stiffness:1,length:0});return c.addBody(g,v),c.addBody(g,m),c.addBody(g,b),c.addConstraint(g,x),c.addConstraint(g,A),g},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(o,t,n,i,l,f,h,w,S,p){S=r.extend({inertia:1/0},S),p=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var g=e.stack(o,t,n,i,l,f,function(v,m){return s.circle(v,m,w,S)});return e.mesh(g,n,i,h,p),g.label="Soft Body",g},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(B,L,y){var e={};B.exports=e;var c=y(9),a=y(0),r=a.deprecated;(function(){e.create=function(d){var s={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(s,d)},e.update=function(d,s,u,o){var t,n,i,l=u.world,f=d.buckets,h,w,S=!1;for(t=0;t<s.length;t++){var p=s[t];if(!(p.isSleeping&&!o)&&!(l.bounds&&(p.bounds.max.x<l.bounds.min.x||p.bounds.min.x>l.bounds.max.x||p.bounds.max.y<l.bounds.min.y||p.bounds.min.y>l.bounds.max.y))){var g=e._getRegion(d,p);if(!p.region||g.id!==p.region.id||o){(!p.region||o)&&(p.region=g);var v=e._regionUnion(g,p.region);for(n=v.startCol;n<=v.endCol;n++)for(i=v.startRow;i<=v.endRow;i++){w=e._getBucketId(n,i),h=f[w];var m=n>=g.startCol&&n<=g.endCol&&i>=g.startRow&&i<=g.endRow,b=n>=p.region.startCol&&n<=p.region.endCol&&i>=p.region.startRow&&i<=p.region.endRow;!m&&b&&b&&h&&e._bucketRemoveBody(d,h,p),(p.region===g||m&&!b||o)&&(h||(h=e._createBucket(f,w)),e._bucketAddBody(d,h,p))}p.region=g,S=!0}}}S&&(d.pairsList=e._createActivePairsList(d))},r(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},r(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(d,s){var u=Math.min(d.startCol,s.startCol),o=Math.max(d.endCol,s.endCol),t=Math.min(d.startRow,s.startRow),n=Math.max(d.endRow,s.endRow);return e._createRegion(u,o,t,n)},e._getRegion=function(d,s){var u=s.bounds,o=Math.floor(u.min.x/d.bucketWidth),t=Math.floor(u.max.x/d.bucketWidth),n=Math.floor(u.min.y/d.bucketHeight),i=Math.floor(u.max.y/d.bucketHeight);return e._createRegion(o,t,n,i)},e._createRegion=function(d,s,u,o){return{id:d+","+s+","+u+","+o,startCol:d,endCol:s,startRow:u,endRow:o}},e._getBucketId=function(d,s){return"C"+d+"R"+s},e._createBucket=function(d,s){var u=d[s]=[];return u},e._bucketAddBody=function(d,s,u){var o=d.pairs,t=c.id,n=s.length,i;for(i=0;i<n;i++){var l=s[i];if(!(u.id===l.id||u.isStatic&&l.isStatic)){var f=t(u,l),h=o[f];h?h[2]+=1:o[f]=[u,l,1]}}s.push(u)},e._bucketRemoveBody=function(d,s,u){var o=d.pairs,t=c.id,n;s.splice(a.indexOf(s,u),1);var i=s.length;for(n=0;n<i;n++){var l=o[t(u,s[n])];l&&(l[2]-=1)}},e._createActivePairsList=function(d){var s,u=d.pairs,o=a.keys(u),t=o.length,n=[],i;for(i=0;i<t;i++)s=u[o[i]],s[2]>0?n.push(s):delete u[o[i]];return n}})()},function(B,L,y){var e={};B.exports=e;var c=y(3),a=y(7),r=y(14),d=y(5),s=y(13),u=y(10),o=y(6),t=y(0),n=y(1);(function(){e.create=function(i,l){var f=(i?i.mouse:null)||(l?l.mouse:null);f||(i&&i.render&&i.render.canvas?f=r.create(i.render.canvas):l&&l.element?f=r.create(l.element):(f=r.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var h=u.create({label:"Mouse Constraint",pointA:f.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:f,element:null,body:null,constraint:h,collisionFilter:{category:1,mask:4294967295,group:0}},S=t.extend(w,l);return d.on(i,"beforeUpdate",function(){var p=o.allBodies(i.world);e.update(S,p),e._triggerEvents(S)}),S},e.update=function(i,l){var f=i.mouse,h=i.constraint,w=i.body;if(f.button===0){if(h.bodyB)a.set(h.bodyB,!1),h.pointA=f.position;else for(var S=0;S<l.length;S++)if(w=l[S],n.contains(w.bounds,f.position)&&s.canCollide(w.collisionFilter,i.collisionFilter))for(var p=w.parts.length>1?1:0;p<w.parts.length;p++){var g=w.parts[p];if(c.contains(g.vertices,f.position)){h.pointA=f.position,h.bodyB=i.body=w,h.pointB={x:f.position.x-w.position.x,y:f.position.y-w.position.y},h.angleB=w.angle,a.set(w,!1),d.trigger(i,"startdrag",{mouse:f,body:w});break}}}else h.bodyB=i.body=null,h.pointB=null,w&&d.trigger(i,"enddrag",{mouse:f,body:w})},e._triggerEvents=function(i){var l=i.mouse,f=l.sourceEvents;f.mousemove&&d.trigger(i,"mousemove",{mouse:l}),f.mousedown&&d.trigger(i,"mousedown",{mouse:l}),f.mouseup&&d.trigger(i,"mouseup",{mouse:l}),r.clearSourceEvents(l)}})()},function(B,L,y){var e={};B.exports=e;var c=y(2),a=y(8),r=y(1),d=y(12),s=y(3);(function(){e.collides=function(u,o){for(var t=[],n=o.length,i=u.bounds,l=a.collides,f=r.overlaps,h=0;h<n;h++){var w=o[h],S=w.parts.length,p=S===1?0:1;if(f(w.bounds,i))for(var g=p;g<S;g++){var v=w.parts[g];if(f(v.bounds,i)){var m=l(v,u);if(m){t.push(m);break}}}}return t},e.ray=function(u,o,t,n){n=n||1e-100;for(var i=c.angle(o,t),l=c.magnitude(c.sub(o,t)),f=(t.x+o.x)*.5,h=(t.y+o.y)*.5,w=d.rectangle(f,h,l,n,{angle:i}),S=e.collides(w,u),p=0;p<S.length;p+=1){var g=S[p];g.body=g.bodyB=g.bodyA}return S},e.region=function(u,o,t){for(var n=[],i=0;i<u.length;i++){var l=u[i],f=r.overlaps(l.bounds,o);(f&&!t||!f&&t)&&n.push(l)}return n},e.point=function(u,o){for(var t=[],n=0;n<u.length;n++){var i=u[n];if(r.contains(i.bounds,o))for(var l=i.parts.length===1?0:1;l<i.parts.length;l++){var f=i.parts[l];if(r.contains(f.bounds,o)&&s.contains(f.vertices,o)){t.push(i);break}}}return t}})()},function(B,L,y){var e={};B.exports=e;var c=y(4),a=y(0),r=y(6),d=y(1),s=y(5),u=y(2),o=y(14);(function(){var t,n;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(p){window.setTimeout(function(){p(a.now())},1e3/60)},n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(p){var g={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!p.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},v=a.extend(g,p);return v.canvas&&(v.canvas.width=v.options.width||v.canvas.width,v.canvas.height=v.options.height||v.canvas.height),v.mouse=p.mouse,v.engine=p.engine,v.canvas=v.canvas||f(v.options.width,v.options.height),v.context=v.canvas.getContext("2d"),v.textures={},v.bounds=v.bounds||{min:{x:0,y:0},max:{x:v.canvas.width,y:v.canvas.height}},v.controller=e,v.options.showBroadphase=!1,v.options.pixelRatio!==1&&e.setPixelRatio(v,v.options.pixelRatio),a.isElement(v.element)&&v.element.appendChild(v.canvas),v},e.run=function(p){(function g(v){p.frameRequestId=t(g),i(p,v),e.world(p,v),(p.options.showStats||p.options.showDebug)&&e.stats(p,p.context,v),(p.options.showPerformance||p.options.showDebug)&&e.performance(p,p.context,v)})()},e.stop=function(p){n(p.frameRequestId)},e.setPixelRatio=function(p,g){var v=p.options,m=p.canvas;g==="auto"&&(g=h(m)),v.pixelRatio=g,m.setAttribute("data-pixel-ratio",g),m.width=v.width*g,m.height=v.height*g,m.style.width=v.width+"px",m.style.height=v.height+"px"},e.lookAt=function(p,g,v,m){m=typeof m<"u"?m:!0,g=a.isArray(g)?g:[g],v=v||{x:0,y:0};for(var b={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},x=0;x<g.length;x+=1){var A=g[x],_=A.bounds?A.bounds.min:A.min||A.position||A,P=A.bounds?A.bounds.max:A.max||A.position||A;_&&P&&(_.x<b.min.x&&(b.min.x=_.x),P.x>b.max.x&&(b.max.x=P.x),_.y<b.min.y&&(b.min.y=_.y),P.y>b.max.y&&(b.max.y=P.y))}var k=b.max.x-b.min.x+2*v.x,C=b.max.y-b.min.y+2*v.y,T=p.canvas.height,M=p.canvas.width,I=M/T,D=k/C,O=1,H=1;D>I?H=D/I:O=I/D,p.options.hasBounds=!0,p.bounds.min.x=b.min.x,p.bounds.max.x=b.min.x+k*O,p.bounds.min.y=b.min.y,p.bounds.max.y=b.min.y+C*H,m&&(p.bounds.min.x+=k*.5-k*O*.5,p.bounds.max.x+=k*.5-k*O*.5,p.bounds.min.y+=C*.5-C*H*.5,p.bounds.max.y+=C*.5-C*H*.5),p.bounds.min.x-=v.x,p.bounds.max.x-=v.x,p.bounds.min.y-=v.y,p.bounds.max.y-=v.y,p.mouse&&(o.setScale(p.mouse,{x:(p.bounds.max.x-p.bounds.min.x)/p.canvas.width,y:(p.bounds.max.y-p.bounds.min.y)/p.canvas.height}),o.setOffset(p.mouse,p.bounds.min))},e.startViewTransform=function(p){var g=p.bounds.max.x-p.bounds.min.x,v=p.bounds.max.y-p.bounds.min.y,m=g/p.options.width,b=v/p.options.height;p.context.setTransform(p.options.pixelRatio/m,0,0,p.options.pixelRatio/b,0,0),p.context.translate(-p.bounds.min.x,-p.bounds.min.y)},e.endViewTransform=function(p){p.context.setTransform(p.options.pixelRatio,0,0,p.options.pixelRatio,0,0)},e.world=function(p,g){var v=a.now(),m=p.engine,b=m.world,x=p.canvas,A=p.context,_=p.options,P=p.timing,k=r.allBodies(b),C=r.allConstraints(b),T=_.wireframes?_.wireframeBackground:_.background,M=[],I=[],D,O={timestamp:m.timing.timestamp};if(s.trigger(p,"beforeRender",O),p.currentBackground!==T&&S(p,T),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,x.width,x.height),A.globalCompositeOperation="source-over",_.hasBounds){for(D=0;D<k.length;D++){var H=k[D];d.overlaps(H.bounds,p.bounds)&&M.push(H)}for(D=0;D<C.length;D++){var R=C[D],q=R.bodyA,F=R.bodyB,G=R.pointA,W=R.pointB;q&&(G=u.add(q.position,R.pointA)),F&&(W=u.add(F.position,R.pointB)),!(!G||!W)&&(d.contains(p.bounds,G)||d.contains(p.bounds,W))&&I.push(R)}e.startViewTransform(p),p.mouse&&(o.setScale(p.mouse,{x:(p.bounds.max.x-p.bounds.min.x)/p.options.width,y:(p.bounds.max.y-p.bounds.min.y)/p.options.height}),o.setOffset(p.mouse,p.bounds.min))}else I=C,M=k,p.options.pixelRatio!==1&&p.context.setTransform(p.options.pixelRatio,0,0,p.options.pixelRatio,0,0);!_.wireframes||m.enableSleeping&&_.showSleeping?e.bodies(p,M,A):(_.showConvexHulls&&e.bodyConvexHulls(p,M,A),e.bodyWireframes(p,M,A)),_.showBounds&&e.bodyBounds(p,M,A),(_.showAxes||_.showAngleIndicator)&&e.bodyAxes(p,M,A),_.showPositions&&e.bodyPositions(p,M,A),_.showVelocity&&e.bodyVelocity(p,M,A),_.showIds&&e.bodyIds(p,M,A),_.showSeparations&&e.separations(p,m.pairs.list,A),_.showCollisions&&e.collisions(p,m.pairs.list,A),_.showVertexNumbers&&e.vertexNumbers(p,M,A),_.showMousePosition&&e.mousePosition(p,p.mouse,A),e.constraints(I,A),_.hasBounds&&e.endViewTransform(p),s.trigger(p,"afterRender",O),P.lastElapsed=a.now()-v},e.stats=function(p,g,v){for(var m=p.engine,b=m.world,x=r.allBodies(b),A=0,_=55,P=44,k=0,C=0,T=0;T<x.length;T+=1)A+=x[T].parts.length;var M={Part:A,Body:x.length,Cons:r.allConstraints(b).length,Comp:r.allComposites(b).length,Pair:m.pairs.list.length};g.fillStyle="#0e0f19",g.fillRect(k,C,_*5.5,P),g.font="12px Arial",g.textBaseline="top",g.textAlign="right";for(var I in M){var D=M[I];g.fillStyle="#aaa",g.fillText(I,k+_,C+8),g.fillStyle="#eee",g.fillText(D,k+_,C+26),k+=_}},e.performance=function(p,g){var v=p.engine,m=p.timing,b=m.deltaHistory,x=m.elapsedHistory,A=m.timestampElapsedHistory,_=m.engineDeltaHistory,P=m.engineElapsedHistory,k=v.timing.lastDelta,C=l(b),T=l(x),M=l(_),I=l(P),D=l(A),O=D/C||0,H=1e3/C||0,R=4,q=12,F=60,G=34,W=10,U=69;g.fillStyle="#0e0f19",g.fillRect(0,50,q*4+F*5+22,G),e.status(g,W,U,F,R,b.length,Math.round(H)+" fps",H/e._goodFps,function(j){return b[j]/C-1}),e.status(g,W+q+F,U,F,R,_.length,k.toFixed(2)+" dt",e._goodDelta/k,function(j){return _[j]/M-1}),e.status(g,W+(q+F)*2,U,F,R,P.length,I.toFixed(2)+" ut",1-I/e._goodFps,function(j){return P[j]/I-1}),e.status(g,W+(q+F)*3,U,F,R,x.length,T.toFixed(2)+" rt",1-T/e._goodFps,function(j){return x[j]/T-1}),e.status(g,W+(q+F)*4,U,F,R,A.length,O.toFixed(2)+" x",O*O*O,function(j){return(A[j]/b[j]/O||0)-1})},e.status=function(p,g,v,m,b,x,A,_,P){p.strokeStyle="#888",p.fillStyle="#444",p.lineWidth=1,p.fillRect(g,v+7,m,1),p.beginPath(),p.moveTo(g,v+7-b*a.clamp(.4*P(0),-2,2));for(var k=0;k<m;k+=1)p.lineTo(g+k,v+7-(k<x?b*a.clamp(.4*P(k),-2,2):0));p.stroke(),p.fillStyle="hsl("+a.clamp(25+95*_,0,120)+",100%,60%)",p.fillRect(g,v-7,4,4),p.font="12px Arial",p.textBaseline="middle",p.textAlign="right",p.fillStyle="#eee",p.fillText(A,g+m,v-5)},e.constraints=function(p,g){for(var v=g,m=0;m<p.length;m++){var b=p[m];if(!(!b.render.visible||!b.pointA||!b.pointB)){var x=b.bodyA,A=b.bodyB,_,P;if(x?_=u.add(x.position,b.pointA):_=b.pointA,b.render.type==="pin")v.beginPath(),v.arc(_.x,_.y,3,0,2*Math.PI),v.closePath();else{if(A?P=u.add(A.position,b.pointB):P=b.pointB,v.beginPath(),v.moveTo(_.x,_.y),b.render.type==="spring")for(var k=u.sub(P,_),C=u.perp(u.normalise(k)),T=Math.ceil(a.clamp(b.length/5,12,20)),M,I=1;I<T;I+=1)M=I%2===0?1:-1,v.lineTo(_.x+k.x*(I/T)+C.x*M*4,_.y+k.y*(I/T)+C.y*M*4);v.lineTo(P.x,P.y)}b.render.lineWidth&&(v.lineWidth=b.render.lineWidth,v.strokeStyle=b.render.strokeStyle,v.stroke()),b.render.anchors&&(v.fillStyle=b.render.strokeStyle,v.beginPath(),v.arc(_.x,_.y,3,0,2*Math.PI),v.arc(P.x,P.y,3,0,2*Math.PI),v.closePath(),v.fill())}}},e.bodies=function(p,g,v){var m=v;p.engine;var b=p.options,x=b.showInternalEdges||!b.wireframes,A,_,P,k;for(P=0;P<g.length;P++)if(A=g[P],!!A.render.visible){for(k=A.parts.length>1?1:0;k<A.parts.length;k++)if(_=A.parts[k],!!_.render.visible){if(b.showSleeping&&A.isSleeping?m.globalAlpha=.5*_.render.opacity:_.render.opacity!==1&&(m.globalAlpha=_.render.opacity),_.render.sprite&&_.render.sprite.texture&&!b.wireframes){var C=_.render.sprite,T=w(p,C.texture);m.translate(_.position.x,_.position.y),m.rotate(_.angle),m.drawImage(T,T.width*-C.xOffset*C.xScale,T.height*-C.yOffset*C.yScale,T.width*C.xScale,T.height*C.yScale),m.rotate(-_.angle),m.translate(-_.position.x,-_.position.y)}else{if(_.circleRadius)m.beginPath(),m.arc(_.position.x,_.position.y,_.circleRadius,0,2*Math.PI);else{m.beginPath(),m.moveTo(_.vertices[0].x,_.vertices[0].y);for(var M=1;M<_.vertices.length;M++)!_.vertices[M-1].isInternal||x?m.lineTo(_.vertices[M].x,_.vertices[M].y):m.moveTo(_.vertices[M].x,_.vertices[M].y),_.vertices[M].isInternal&&!x&&m.moveTo(_.vertices[(M+1)%_.vertices.length].x,_.vertices[(M+1)%_.vertices.length].y);m.lineTo(_.vertices[0].x,_.vertices[0].y),m.closePath()}b.wireframes?(m.lineWidth=1,m.strokeStyle="#bbb",m.stroke()):(m.fillStyle=_.render.fillStyle,_.render.lineWidth&&(m.lineWidth=_.render.lineWidth,m.strokeStyle=_.render.strokeStyle,m.stroke()),m.fill())}m.globalAlpha=1}}},e.bodyWireframes=function(p,g,v){var m=v,b=p.options.showInternalEdges,x,A,_,P,k;for(m.beginPath(),_=0;_<g.length;_++)if(x=g[_],!!x.render.visible)for(k=x.parts.length>1?1:0;k<x.parts.length;k++){for(A=x.parts[k],m.moveTo(A.vertices[0].x,A.vertices[0].y),P=1;P<A.vertices.length;P++)!A.vertices[P-1].isInternal||b?m.lineTo(A.vertices[P].x,A.vertices[P].y):m.moveTo(A.vertices[P].x,A.vertices[P].y),A.vertices[P].isInternal&&!b&&m.moveTo(A.vertices[(P+1)%A.vertices.length].x,A.vertices[(P+1)%A.vertices.length].y);m.lineTo(A.vertices[0].x,A.vertices[0].y)}m.lineWidth=1,m.strokeStyle="#bbb",m.stroke()},e.bodyConvexHulls=function(p,g,v){var m=v,b,x,A;for(m.beginPath(),x=0;x<g.length;x++)if(b=g[x],!(!b.render.visible||b.parts.length===1)){for(m.moveTo(b.vertices[0].x,b.vertices[0].y),A=1;A<b.vertices.length;A++)m.lineTo(b.vertices[A].x,b.vertices[A].y);m.lineTo(b.vertices[0].x,b.vertices[0].y)}m.lineWidth=1,m.strokeStyle="rgba(255,255,255,0.2)",m.stroke()},e.vertexNumbers=function(p,g,v){var m=v,b,x,A;for(b=0;b<g.length;b++){var _=g[b].parts;for(A=_.length>1?1:0;A<_.length;A++){var P=_[A];for(x=0;x<P.vertices.length;x++)m.fillStyle="rgba(255,255,255,0.2)",m.fillText(b+"_"+x,P.position.x+(P.vertices[x].x-P.position.x)*.8,P.position.y+(P.vertices[x].y-P.position.y)*.8)}}},e.mousePosition=function(p,g,v){var m=v;m.fillStyle="rgba(255,255,255,0.8)",m.fillText(g.position.x+"  "+g.position.y,g.position.x+5,g.position.y-5)},e.bodyBounds=function(p,g,v){var m=v;p.engine;var b=p.options;m.beginPath();for(var x=0;x<g.length;x++){var A=g[x];if(A.render.visible)for(var _=g[x].parts,P=_.length>1?1:0;P<_.length;P++){var k=_[P];m.rect(k.bounds.min.x,k.bounds.min.y,k.bounds.max.x-k.bounds.min.x,k.bounds.max.y-k.bounds.min.y)}}b.wireframes?m.strokeStyle="rgba(255,255,255,0.08)":m.strokeStyle="rgba(0,0,0,0.1)",m.lineWidth=1,m.stroke()},e.bodyAxes=function(p,g,v){var m=v;p.engine;var b=p.options,x,A,_,P;for(m.beginPath(),A=0;A<g.length;A++){var k=g[A],C=k.parts;if(k.render.visible)if(b.showAxes)for(_=C.length>1?1:0;_<C.length;_++)for(x=C[_],P=0;P<x.axes.length;P++){var T=x.axes[P];m.moveTo(x.position.x,x.position.y),m.lineTo(x.position.x+T.x*20,x.position.y+T.y*20)}else for(_=C.length>1?1:0;_<C.length;_++)for(x=C[_],P=0;P<x.axes.length;P++)m.moveTo(x.position.x,x.position.y),m.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}b.wireframes?(m.strokeStyle="indianred",m.lineWidth=1):(m.strokeStyle="rgba(255, 255, 255, 0.4)",m.globalCompositeOperation="overlay",m.lineWidth=2),m.stroke(),m.globalCompositeOperation="source-over"},e.bodyPositions=function(p,g,v){var m=v;p.engine;var b=p.options,x,A,_,P;for(m.beginPath(),_=0;_<g.length;_++)if(x=g[_],!!x.render.visible)for(P=0;P<x.parts.length;P++)A=x.parts[P],m.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),m.closePath();for(b.wireframes?m.fillStyle="indianred":m.fillStyle="rgba(0,0,0,0.5)",m.fill(),m.beginPath(),_=0;_<g.length;_++)x=g[_],x.render.visible&&(m.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),m.closePath());m.fillStyle="rgba(255,165,0,0.8)",m.fill()},e.bodyVelocity=function(p,g,v){var m=v;m.beginPath();for(var b=0;b<g.length;b++){var x=g[b];if(x.render.visible){var A=c.getVelocity(x);m.moveTo(x.position.x,x.position.y),m.lineTo(x.position.x+A.x,x.position.y+A.y)}}m.lineWidth=3,m.strokeStyle="cornflowerblue",m.stroke()},e.bodyIds=function(p,g,v){var m=v,b,x;for(b=0;b<g.length;b++)if(g[b].render.visible){var A=g[b].parts;for(x=A.length>1?1:0;x<A.length;x++){var _=A[x];m.font="12px Arial",m.fillStyle="rgba(255,255,255,0.5)",m.fillText(_.id,_.position.x+10,_.position.y-10)}}},e.collisions=function(p,g,v){var m=v,b=p.options,x,A,_,P;for(m.beginPath(),_=0;_<g.length;_++)if(x=g[_],!!x.isActive)for(A=x.collision,P=0;P<x.activeContacts.length;P++){var k=x.activeContacts[P],C=k.vertex;m.rect(C.x-1.5,C.y-1.5,3.5,3.5)}for(b.wireframes?m.fillStyle="rgba(255,255,255,0.7)":m.fillStyle="orange",m.fill(),m.beginPath(),_=0;_<g.length;_++)if(x=g[_],!!x.isActive&&(A=x.collision,x.activeContacts.length>0)){var T=x.activeContacts[0].vertex.x,M=x.activeContacts[0].vertex.y;x.activeContacts.length===2&&(T=(x.activeContacts[0].vertex.x+x.activeContacts[1].vertex.x)/2,M=(x.activeContacts[0].vertex.y+x.activeContacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?m.moveTo(T-A.normal.x*8,M-A.normal.y*8):m.moveTo(T+A.normal.x*8,M+A.normal.y*8),m.lineTo(T,M)}b.wireframes?m.strokeStyle="rgba(255,165,0,0.7)":m.strokeStyle="orange",m.lineWidth=1,m.stroke()},e.separations=function(p,g,v){var m=v,b=p.options,x,A,_,P,k;for(m.beginPath(),k=0;k<g.length;k++)if(x=g[k],!!x.isActive){A=x.collision,_=A.bodyA,P=A.bodyB;var C=1;!P.isStatic&&!_.isStatic&&(C=.5),P.isStatic&&(C=0),m.moveTo(P.position.x,P.position.y),m.lineTo(P.position.x-A.penetration.x*C,P.position.y-A.penetration.y*C),C=1,!P.isStatic&&!_.isStatic&&(C=.5),_.isStatic&&(C=0),m.moveTo(_.position.x,_.position.y),m.lineTo(_.position.x+A.penetration.x*C,_.position.y+A.penetration.y*C)}b.wireframes?m.strokeStyle="rgba(255,165,0,0.5)":m.strokeStyle="orange",m.stroke()},e.inspector=function(p,g){p.engine;var v=p.selected,m=p.render,b=m.options,x;if(b.hasBounds){var A=m.bounds.max.x-m.bounds.min.x,_=m.bounds.max.y-m.bounds.min.y,P=A/m.options.width,k=_/m.options.height;g.scale(1/P,1/k),g.translate(-m.bounds.min.x,-m.bounds.min.y)}for(var C=0;C<v.length;C++){var T=v[C].data;switch(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.9)",g.setLineDash([1,2]),T.type){case"body":x=T.bounds,g.beginPath(),g.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),g.closePath(),g.stroke();break;case"constraint":var M=T.pointA;T.bodyA&&(M=T.pointB),g.beginPath(),g.arc(M.x,M.y,10,0,2*Math.PI),g.closePath(),g.stroke();break}g.setLineDash([]),g.translate(-.5,-.5)}p.selectStart!==null&&(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.6)",g.fillStyle="rgba(255,165,0,0.1)",x=p.selectBounds,g.beginPath(),g.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),g.closePath(),g.stroke(),g.fill(),g.translate(-.5,-.5)),b.hasBounds&&g.setTransform(1,0,0,1,0,0)};var i=function(p,g){var v=p.engine,m=p.timing,b=m.historySize,x=v.timing.timestamp;m.delta=g-m.lastTime||e._goodDelta,m.lastTime=g,m.timestampElapsed=x-m.lastTimestamp||0,m.lastTimestamp=x,m.deltaHistory.unshift(m.delta),m.deltaHistory.length=Math.min(m.deltaHistory.length,b),m.engineDeltaHistory.unshift(v.timing.lastDelta),m.engineDeltaHistory.length=Math.min(m.engineDeltaHistory.length,b),m.timestampElapsedHistory.unshift(m.timestampElapsed),m.timestampElapsedHistory.length=Math.min(m.timestampElapsedHistory.length,b),m.engineElapsedHistory.unshift(v.timing.lastElapsed),m.engineElapsedHistory.length=Math.min(m.engineElapsedHistory.length,b),m.elapsedHistory.unshift(m.lastElapsed),m.elapsedHistory.length=Math.min(m.elapsedHistory.length,b)},l=function(p){for(var g=0,v=0;v<p.length;v+=1)g+=p[v];return g/p.length||0},f=function(p,g){var v=document.createElement("canvas");return v.width=p,v.height=g,v.oncontextmenu=function(){return!1},v.onselectstart=function(){return!1},v},h=function(p){var g=p.getContext("2d"),v=window.devicePixelRatio||1,m=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return v/m},w=function(p,g){var v=p.textures[g];return v||(v=p.textures[g]=new Image,v.src=g,v)},S=function(p,g){var v=g;/(jpg|gif|png)$/.test(g)&&(v="url("+g+")"),p.canvas.style.background=v,p.canvas.style.backgroundSize="contain",p.currentBackground=g}})()},function(B,L,y){var e={};B.exports=e;var c=y(5),a=y(17),r=y(0);(function(){var d,s;if(typeof window<"u"&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!d){var u;d=function(o){u=setTimeout(function(){o(r.now())},1e3/60)},s=function(){clearTimeout(u)}}e.create=function(o){var t={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},n=r.extend(t,o);return n.delta=n.delta||1e3/n.fps,n.deltaMin=n.deltaMin||1e3/n.fps,n.deltaMax=n.deltaMax||1e3/(n.fps*.5),n.fps=1e3/n.delta,n},e.run=function(o,t){return typeof o.positionIterations<"u"&&(t=o,o=e.create()),function n(i){o.frameRequestId=d(n),i&&o.enabled&&e.tick(o,t,i)}(),o},e.tick=function(o,t,n){var i=t.timing,l;o.isFixed?l=o.delta:(l=n-o.timePrev||o.delta,o.timePrev=n,o.deltaHistory.push(l),o.deltaHistory=o.deltaHistory.slice(-o.deltaSampleSize),l=Math.min.apply(null,o.deltaHistory),l=l<o.deltaMin?o.deltaMin:l,l=l>o.deltaMax?o.deltaMax:l,o.delta=l);var f={timestamp:i.timestamp};c.trigger(o,"beforeTick",f),o.frameCounter+=1,n-o.counterTimestamp>=1e3&&(o.fps=o.frameCounter*((n-o.counterTimestamp)/1e3),o.counterTimestamp=n,o.frameCounter=0),c.trigger(o,"tick",f),c.trigger(o,"beforeUpdate",f),a.update(t,l),c.trigger(o,"afterUpdate",f),c.trigger(o,"afterTick",f)},e.stop=function(o){s(o.frameRequestId)},e.start=function(o,t){e.run(o,t)}})()},function(B,L,y){var e={};B.exports=e;var c=y(8),a=y(0),r=a.deprecated;(function(){e.collides=function(d,s){return c.collides(d,s)},r(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(B,L,y){var e={};B.exports=e,y(1);var c=y(0);(function(){e.pathToVertices=function(a,r){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,s,u,o,t,n,i,l,f,h,w=[],S,p,g=0,v=0,m=0;r=r||15;var b=function(A,_,P){var k=P%2===1&&P>1;if(!f||A!=f.x||_!=f.y){f&&k?(S=f.x,p=f.y):(S=0,p=0);var C={x:S+A,y:p+_};(k||!f)&&(f=C),w.push(C),v=S+A,m=p+_}},x=function(A){var _=A.pathSegTypeAsLetter.toUpperCase();if(_!=="Z"){switch(_){case"M":case"L":case"T":case"C":case"S":case"Q":v=A.x,m=A.y;break;case"H":v=A.x;break;case"V":m=A.y;break}b(v,m,A.pathSegType)}};for(e._svgPathToAbsolute(a),u=a.getTotalLength(),n=[],d=0;d<a.pathSegList.numberOfItems;d+=1)n.push(a.pathSegList.getItem(d));for(i=n.concat();g<u;){if(h=a.getPathSegAtLength(g),t=n[h],t!=l){for(;i.length&&i[0]!=t;)x(i.shift());l=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=a.getPointAtLength(g),b(o.x,o.y,0);break}g+=r}for(d=0,s=i.length;d<s;++d)x(i[d]);return w},e._svgPathToAbsolute=function(a){for(var r,d,s,u,o,t,n=a.pathSegList,i=0,l=0,f=n.numberOfItems,h=0;h<f;++h){var w=n.getItem(h),S=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(S))"x"in w&&(i=w.x),"y"in w&&(l=w.y);else switch("x1"in w&&(s=i+w.x1),"x2"in w&&(o=i+w.x2),"y1"in w&&(u=l+w.y1),"y2"in w&&(t=l+w.y2),"x"in w&&(i+=w.x),"y"in w&&(l+=w.y),S){case"m":n.replaceItem(a.createSVGPathSegMovetoAbs(i,l),h);break;case"l":n.replaceItem(a.createSVGPathSegLinetoAbs(i,l),h);break;case"h":n.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(i),h);break;case"v":n.replaceItem(a.createSVGPathSegLinetoVerticalAbs(l),h);break;case"c":n.replaceItem(a.createSVGPathSegCurvetoCubicAbs(i,l,s,u,o,t),h);break;case"s":n.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(i,l,o,t),h);break;case"q":n.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(i,l,s,u),h);break;case"t":n.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(i,l),h);break;case"a":n.replaceItem(a.createSVGPathSegArcAbs(i,l,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),h);break;case"z":case"Z":i=r,l=d;break}(S=="M"||S=="m")&&(r=i,d=l)}}})()},function(B,L,y){var e={};B.exports=e;var c=y(6);y(0),function(){e.create=c.create,e.add=c.add,e.remove=c.remove,e.clear=c.clear,e.addComposite=c.addComposite,e.addBody=c.addBody,e.addConstraint=c.addConstraint}()}])})})(Z);var le=Z.exports;const z=ve(le);class ce{physicsSprite(V,B,L,y){return new xe(V,B,L,y)}}class ue{constructor(V){this.defaultContainer=V,this._make=new ce}set container(V){this.defaultContainer=V}get make(){return this._make}physicsSprite(V,B,L,y=be.RECTANGLE,e=1,c={x:0,y:0}){const a=this._make.physicsSprite(V,B,L,y);a.alpha=e;const r=he(c);return a.x=r.x,a.y=r.y,this.defaultContainer.addChild(a)}existing(V){return this.defaultContainer.addChild(V)}}class de{constructor(){this.app=we.instance,this._addFactory=new ue(this.app.stage),this._makeFactory=this._addFactory.make}set container(V){this._addFactory.container=V}get add(){return this._addFactory}get make(){return this._makeFactory}}se=class extends Se{constructor(E){super(E),this.app=E,this._debug=!1,this._updateables=[],this._bounds={x:0,y:0},this._isRunning=!1,this._factory=new de}get engine(){return this._engine}set debug(E){var V,B,L;this._debug=E,this._debug||((V=this._debugContainer)==null||V.parent.removeChild(this._debugContainer),(B=this._debugGraphics)==null||B.destroy({children:!0}),(L=this._debugContainer)==null||L.destroy({children:!0}))}get debug(){return this._debug}async init(E=!1,V=!1,B=!0,L={}){const y=L||{};this._debug=V,this._engine=z.Engine.create(y),B&&this.createWorldBounds(),E&&this.start()}createWorldBounds(E=!0){const V=E?this.app.size.x:this._bounds.x,B=E?this.app.size.y:this._bounds.y,L=z.Bodies.rectangle(-50/2,-B/2-50/2,V+50,50,{isStatic:!0}),y=z.Bodies.rectangle(-50/2,B/2+50/2,V+50,50,{isStatic:!0}),e=z.Bodies.rectangle(-V/2-50/2,-50/2,50,B+50,{isStatic:!0}),c=z.Bodies.rectangle(V/2+50/2,-50/2,50,B+50,{isStatic:!0});this.addToWorld(L,y,e,c)}start(){this._isRunning=!0}stop(){this._isRunning=!1}addToWorld(...E){E.forEach(V=>{let B;V.hasOwnProperty("body")?(B=V.body,this._updateables.push(V)):B=V,z.World.add(this._engine.world,B)})}removeFromWorld(...E){E.forEach(V=>{z.World.remove(this._engine.world,V)})}drawDebug(){(!this._debugGraphics||!this._debugContainer||!this._debugGraphics.parent)&&(this._debugContainer=this.app.make.container(),this.app.add.existing(this._debugContainer),this._debugGraphics=this.app.make.graphics(),this._debugContainer.addChild(this._debugGraphics),this._debugContainer.x=this.app.resizer.getSize().x*.5,this._debugContainer.y=this.app.resizer.getSize().y*.5,this.app.stage.setChildIndex(this._debugContainer,this.app.stage.children.length-1)),this._debugGraphics.clear();for(let E=0;E<this._updateables.length;E++){const V=this._updateables[E],B=this._updateables[E].body,L=(V==null?void 0:V.debugColor)||2737654,y=B.vertices;this._debugGraphics.lineStyle(1,65280,1),this._debugGraphics.beginFill(L,.5),this._debugGraphics.moveTo(y[0].x,y[0].y);for(let e=1;e<y.length;e++)this._debugGraphics.lineTo(y[e].x,y[e].y);this._debugGraphics.lineTo(y[0].x,y[0].y),this._debugGraphics.endFill()}}update(E){this._isRunning&&(typeof z>"u"||!this._engine||this._engine&&(this._updateables.forEach(V=>{V.update()}),this._debug&&this.drawDebug(),z.Engine.update(this._engine,16.666666666666668,1)))}}});export{Ae as __tla,se as default};
